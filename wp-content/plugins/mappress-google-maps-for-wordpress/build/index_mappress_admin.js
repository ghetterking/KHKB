(()=>{var e={844:()=>{function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function t(t){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?e(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o=wp.element.createElement,i=wp.element,l=(i.Fragment,i.useEffect),s=(i.useLayoutEffect,i.useRef,i.useState),c=wp.components,p=c.Button,u=c.Modal,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function d(e){var n,r,i=a(s({isOpen:!1,reason:"",reasonText:"",redirectUrl:null}),2),c=i[0],d=i[1];function m(e){d((function(n){return t(t({},n),e)}))}function f(e,t){switch(e){case"cancel":m({isOpen:!1});break;case"submit":m({isOpen:!1}),window.location.href=c.redirectUrl+"&mapp_reason="+c.reason+"&mapp_reason_text="+encodeURIComponent(c.reasonText.trim())}}return l((function(){var e=jQuery("#deactivate-mappress-google-maps-for-wordpress");e.length&&(e.off("click.mapp"),e.on("click.mapp",(function(){var e,t;return(t=(e=this)?jQuery(e).attr("href"):null)&&m({isOpen:!0,redirectUrl:t}),!1})))}),[]),c.isOpen?o(u,{isDismissible:!0,onRequestClose:function(){return f("cancel")},shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,title:__("Feedback")},(r=!c.reason||"other"==c.reason&&!c.reasonText,sprintf("<a href='https://mappresspro.com/chris-contact' target='_blank'>%s</a>",__("contact me")),o("div",{className:"mapp-deactivate"},o("div",{className:"mapp-deactivate-content"},o("h2",null,__("Sorry to see you go!  Need help?"),o(p,{className:"mapp-deactivate-help",isSecondary:!0,href:"https://mappresspro.com/chris-contact",target:"_blank"},__("Contact me"))),o("h2",null,__("If not, I'd really appreciate some feedback:")),(n=[{value:"badday",label:__("I'm just having a bad day")},{value:"notworking",label:__("The plugin isn't working"),placeholder:__("What didn't work?  Was there an error message?")},{value:"toohard",label:__("Too hard to use"),placeholder:__("How can I make it easier?")},{value:"feature",label:__("Missing feature"),placeholder:__("What's missing?")},{value:"other",label:__("Other"),placeholder:__("Can you provide any details?")}],o("div",{className:"mapp-deactivate-reasons"},_.map(n,(function(e){var t=e.value==c.reason;return o("div",{className:"mapp-deactivate-reason",key:e.value},o("label",null,o("input",{checked:t,onChange:function(e){return m({reason:e.target.value})},type:"radio",value:e.value}),e.label),t&&e.placeholder&&o("div",null,o("textarea",{onChange:function(e){return m({reasonText:e.target.value})},placeholder:e.placeholder,value:c.reasonText})))}))))),o("div",{className:"mapp-deactivate-footer"},o(p,{isSecondary:!0,disabled:r,onClick:function(){return f("submit")}},__("Deactivate")),o(p,{isPrimary:!0,onClick:function(){return f("cancel")}},__("Cancel")))))):null}jQuery(document).ready((function(){var e=jQuery("<div></div>").appendTo("body").get(0);wp.element.render(o(d),e)}))},215:(e,t,n)=>{"use strict";n.r(t);var a=n(525),r=n(143);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s,c=window.mapp||{},p=wp.element.createElement;s=jQuery,c.Editor=function(e){this.drawingManager=null,this.map=e,this.poiEditor=null;var t=this;this.initialize=function(){this.map.display(),this.poiEditor=new c.PoiEditor(this.map),this.initDrawingManager(),s(this.map.places).off("search.mapp"),s(this.map.places).on("search.mapp",(function(e,n){t.insert(n)}))},this.insert=function(e){if(e)if(this.drawingManager&&this.drawingManager.setDrawingMode(null),this.map.poiClose(),e.geometry){var n=e.formatted_address?e.formatted_address.replace(/, United States of America/i,"").replace(/, United States/i,"").replace(/, USA/i,""):null,a=e.name==n?"":n,r=new c.Poi({address:n,body:a,iconid:this.poiEditor.lastIcon,point:e.geometry.location,title:e.name,viewport:e.geometry.viewport?e.geometry.viewport:null});this.map.poiInsert(r),r.center()}else e.overlay?(this.map.poiHover(null),"marker"==e.type?(r=new c.Poi({body:"",iconid:null,overlay:null,point:e.overlay.getPosition().toJSON(),title:e.overlay.getPosition().toUrlValue(6),type:null}),e.overlay.setMap(null)):r=new c.Poi({body:"",iconid:null,overlay:e.overlay,title:mappl10n.shape,type:e.type}),this.map.poiInsert(r)):"string"==typeof e&&"http"==e.substring(0,4)&&(r=new c.Poi({iconid:this.poiEditor.lastIcon,kml:{url:e},title:"KML",type:"kml"}),t.map.poiInsert(r),c.event.addListenerOnce(r.overlay,"ready defaultviewport_changed",(function(){r.center()})))},this.initDrawingManager=function(){var e={fillColor:"#0000FF",fillOpacity:.4,strokeColor:"#0000FF",strokeOpacity:1,strokeWeight:2};"leaflet"==mappl10n.options.engine||google.maps.drawing&&(this.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE,google.maps.drawing.OverlayType.CIRCLE]},circleOptions:e,polygonOptions:e,polylineOptions:e,rectangleOptions:e}),this.drawingManager.setMap(this.map.getMap()),c.event.addListener(this.drawingManager,"overlaycomplete",(function(e){t.drawingManager.get("drawingMode")&&t.insert(e)})))},this.initialize.apply(this)},c.PoiEditor=function(e){this.map=e,this.poi=null,this.sel=null,this.lastIcon=null;var t=this;this.initialize=function(){this.sel=s(this.map.iw.getContent()),s(this.map).on("mapp.open",(function(e,n){t.render(n)})),s(this.map).on("mapp.close",(function(){t.mce(!1)})),this.sel.on("click","[data-mapp-poi]",(function(e){e.preventDefault();var n=s(this).attr("data-mapp-poi");t[n]()})),this.sel.on("click",".mapp-poi-visual, .mapp-poi-html",(function(e){var n=s(this).hasClass("mapp-poi-visual");t.mce(n)})),this.sel.on("keydown",(function(e){13==e.which&&"mapp-poi-body"!=e.target.id&&(e.preventDefault(),t.save())}))},this.cancel=function(){this.map.poiClose()},this.initMCE=function(){if("undefined"!=typeof tinyMCE&&void 0!==tinyMCE.init){var e="en";if(void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit&&void 0!==window.tinyMCEPreInit.mceInit.content){var t=window.tinyMCEPreInit.mceInit.content;e=void 0!==t.language?t.language:"en"}var n={mode:"none",height:"100%",convert_urls:!1,language:e,menubar:!1,plugins:"image,paste,textcolor,wordpress,wpeditimage,wplink,wpview",relative_urls:!1,remove_script_host:!1,statusbar:!1,theme:"modern",toolbar1:"bold,italic,link",toolbar2:"",toolbar3:"",toolbar4:""};tinyMCE.init(n),this.mce(!0)}},this.mce=function(e){var n=e?"mceAddEditor":"mceRemoveEditor";"undefined"!=typeof tinyMCE&&tinyMCE.execCommand(n,!1,"mapp-poi-body"),s(".mapp-poi-visual, .mapp-poi-html",t.sel).removeClass("mapp-active"),e?s(".mapp-poi-visual",t.sel).addClass("mapp-active"):s(".mapp-poi-html",t.sel).addClass("mapp-active")},this.remove=function(){confirm(mappl10n.delete_prompt)&&(this.map.poiClose(),this.map.poiRemove(this.poi))},this.render=function(e){this.poi=e,this.renderColorPicker(this.poi),this.renderIconPicker(this.poi),this.initMCE()},this.renderColorPicker=function(e){var t=this;document.getElementById("mapp-poi-colorpicker")&&wp.element.render(p(a.MappColorPicker,i(i({},e.getTemplateColors()),{},{isExtended:!0,onChange:function(n){e.set({dirty:!0}),e.setTemplateColors(n),t.map.renderList(),t.renderColorPicker(e)}})),document.getElementById("mapp-poi-colorpicker"))},this.renderIconPicker=function(e){var t=this;document.getElementById("mapp-poi-iconpicker")&&wp.element.render(p(r.MappIconPicker,{iconid:e.iconid,onChange:function(n){e.set({dirty:!0,iconid:n}),t.lastIcon=n,t.map.renderList(),t.renderIconPicker(e)}}),document.getElementById("mapp-poi-iconpicker"))},this.save=function(){"undefined"!=typeof tinyMCE&&tinyMCE.get("mapp-poi-body")&&tinyMCE.get("mapp-poi-body").save(),this.poi.set({dirty:!0,title:s(".mapp-poi-title").val(),body:s(".mapp-poi-body").val()}),this.map.renderList(),this.map.poiClose()},this.initialize.apply(this)}},713:(e,t,n)=>{"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.r(t),n.d(t,{default:()=>y});var s=wp.element.createElement,c=wp.url.addQueryArgs,p=wp.element,u=p.useCallback,d=p.useEffect,m=p.useState,f=wp.components,h=(f.Button,f.Dropdown),g=f.Spinner,b=f.TextControl,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function y(e){var t=i(m({isFetching:!1,results:[],search:"",searchTerm:""}),2),n=t[0],a=t[1];function o(e){a((function(t){return r(r({},t),e)}))}d((function(){n.isOpen&&(o({isFetching:!0}),wp.apiFetch({path:c("/wp/v2/search",{search:n.search,per_page:20})}).then((function(e){o({results:e,isFetching:!1})})))}),[n.search,n.isOpen]);var l=u(_.debounce((function(e){o({search:e})}),1e3),[]);function p(t,a){return s("div",{className:"mapp-attach-control"},s("div",{className:"mapp-attach-control-toolbar"},s(b,{autoComplete:"false",value:n.searchTerm,onChange:function(e){o({searchTerm:e}),l(e)},placeholder:__("Search")})),function(){if(n.isFetching)return s(g,null);if(n.results)return n.results.length?s("div",{className:"mapp-attach-items"},n.results.map((function(t){return s("div",{key:t.id,className:"mapp-attach-item",onClick:function(){e.onChange(t.id,t.title)}},s("div",{className:"mapp-attach-item-title"},t.title?t.title:__("Untitled")),s("div",{className:"mapp-attach-item-type"},t.type))}))):s("div",{},__("No posts found"))}())}return s("div",{onClick:function(e){return e.stopPropagation()}},s(h,{onToggle:function(e){return o({isOpen:e})},renderToggle:function(e){e.isOpen;var t=e.onToggle;return s("a",{href:"#",onClick:t},__("Attach"))},renderContent:function(e){e.isOpen,e.onToggle;return p()}}))}},525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappColorPicker:()=>y});var a=n(824);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c=wp.element.createElement,p=wp.element,u=p.Fragment,d=p.useEffect,m=(p.useLayoutEffect,p.useCallback,p.useRef,p.useState),f=(wp.data.useSelect,wp.compose.withState,wp.components),h=f.Button,g=(f.ColorPalette,f.ColorPicker),b=(f.Dashicon,f.Dropdown,f.ExternalLink,f.Modal),__=(f.Panel,f.PanelBody,f.PanelRow,f.Popover,f.RadioControl,f.Spinner,f.TabPanel,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function y(e){var t=l(m({isCustomOpen:!1,isOpen:!1}),2),n=t[0],r=t[1];function i(e){r((function(t){return o(o({},t),e)}))}function s(t,n){switch(t){case"close":i({isOpen:!1});break;case"open":i({isOpen:!0});break;case"select":e.onChange(n),s("close");break;case"set":e.onChange(n)}}return d((function(){}),[]),c(u,null,c("span",{className:"mapp-colors-toggle",onClick:function(){return s("open",null)},style:{backgroundColor:e.color,border:e.isExtended?"1px solid "+e.color:"1px solid gray",opacity:e.isExtended&&e.opacity?e.opacity/100:1},tabIndex:0}),function(){if(!n.isOpen)return null;var t=_.map([100,90,80,70,60,50,40,30,20,10,0],(function(e){return{label:e+"%",value:e}})),r=_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],(function(e){return{label:e+"px",value:e}}));return c(b,{title:__("Select a color"),className:"mapp-colors-modal",onRequestClose:function(e){return s("close")}},c("div",{className:"mapp-colors"},c("div",{className:"mapp-colors-list"},_.map([["yellow","yellowgreen","green","seagreen","blue","cornflowerblue","darkslateblue","purple","firebrick","red","darkorange","orange","saddlebrown"],["lightyellow","greenyellow","lightgreen","darkseagreen","lightblue","skyblue","slateblue","orchid","plum","pink","sandybrown","goldenrod","peru"],["white","lightgray","gray","black"]],(function(t,n){return c("div",{key:n},_.map(t,(function(t){return c("span",{className:"mapp-color"+(t==e.color?" mapp-selected":""),key:t,onClick:function(){i({isCustomOpen:!1}),s("select",{color:t})},style:{backgroundColor:t},title:t})})))}))),n.isCustomOpen&&c(g,{color:e.color,onChangeComplete:function(e){return s("set",{color:e.hex})},disableAlpha:!0}),e.isExtended&&c(a.Select,{label:__("Opacity"),options:t,value:e.opacity?e.opacity:"",onChange:function(e){return s("set",{opacity:e})}}),e.isExtended&&c(a.Select,{label:__("Stroke"),options:r,value:e.weight?e.weight:"",onChange:function(e){return s("set",{weight:e})}}),c("div",{className:"mapp-colors-toolbar"},c(h,{isPrimary:!0,onClick:function(){return s("close")}},__("Done")),c(h,{onClick:function(){return i({isCustomOpen:!n.isCustomOpen})}},__("Custom color")))))}())}},371:(e,t,n)=>{"use strict";n.r(t);var a=n(694);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}wp&&wp.plugins&&wp.plugins.registerPlugin&&wp.editPost&&wp.plugins.registerPlugin("mappress-document-settings-panel",{render:function(){var e,t,n=wp.editPost.PluginDocumentSettingPanel,r=wp.element.createElement,i=wp.element,s=i.Fragment,c=i.useEffect,p=(i.useLayoutEffect,i.useRef,i.useState),u=wp.components,d=u.Button,m=u.Spinner,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")},f=l(p({isFetchingItems:!0,isPickerOpen:!1,items:null,pickerMapid:null,pickerMode:"list"}),2),h=f[0],g=f[1];function b(e){g((function(t){return o(o({},t),e)}))}function y(e,t){switch(e){case"open-library":b({isPickerOpen:!0,pickerMode:"list"});break;case"edit":b({isPickerOpen:!0,pickerMapid:t,pickerMode:"edit"});break;case"pick-close":b({isPickerOpen:!1,pickerMapid:null});break;case"pick-insert":var n=wp.blocks.createBlock("mappress/map",{mapid:t});wp.data.dispatch("core/block-editor").insertBlock(n,0),b({isPickerOpen:!1,pickerMapid:null})}}function v(e){var t=e.map_title?e.map_title:__("Untitled");return r("div",{className:"mapp-document-item",key:e.mapid+e.postid},r("a",{className:"mapp-document-col-map_title",href:"#",onClick:function(t){return y("edit",e.mapid)}},t),r("div",{className:"mapp-document-col-mapid"},e.mapid))}return c((function(){var e=function(e){b({isFetchingItems:e.isFetchingItems,isSavingMap:e.isSavingMap,items:e.items})};return mapp.store.subscribe(e),function(){return mapp.store.unsubscribe(e)}})),c((function(){mapp.store.fetchItems()}),[]),r(n,{title:"MapPress",className:"mapp-document-panel"},(t=_.filter(h.items,(function(e){return e.postid==mappl10n.options.postid})),e=h.isFetchingItems?r(m,null):t.length?r(s,null,r("div",{className:"mapp-document-header"},r("div",{className:"mapp-document-col-map_title"},__("Map title")),r("div",{className:"mapp-document-col-mapid"},null,__("Map ID"))),_.map(t,v)):r("div",{className:"mapp-document-message"},__("No maps found")),r("div",null,r("div",{className:"mapp-document-list"},e))),r(d,{icon:"portfolio",isSecondary:!0,onClick:function(){return y("open-library")}},__("Open map library")),function(){if(h.isPickerOpen)return r(a.default,{mapid:h.pickerMapid,mode:h.pickerMode,onAction:y,type:"post"})}())},icon:null})},999:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var a=n(429),r=n(710);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=window.mapp||{},u=wp.element.createElement,d=wp.element,m=(d.Fragment,d.useEffect),f=(d.useLayoutEffect,d.useRef),h=d.useState,g=wp.components,b=g.Button,y=(g.Dropdown,g.Modal,g.Panel,g.PanelBody,g.Popover,g.Spinner,g.TextControl),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function v(e){var t,n,o=s(h({dragging:null,dragover:null,isFetchingMap:!!e.mapid,isPoiListOpen:!0,isSavingMap:!1,map:null,mapdata:null}),2),l=o[0],c=o[1],d=f(null);function g(e){c((function(t){return i(i({},t),e)}))}function v(e){g({map:l.map})}function w(t,n){switch(t){case"change-settings":l.map.set(n),g({map:l.map});break;case"change-title":l.map.set({title:n}),g({map:l.map});break;case"close":e.onAction("edit-close");break;case"trash":confirm(mappl10n.delete_map_prompt)&&(p.store.trashMap({mapid:e.mapid}),e.onAction("edit-trash"));break;case"save":p.store.saveMap({mapdata:l.map.toJSON(),success:function(t){e.onAction("edit-save",t.mapid)}})}}return m((function(){l.map&&(jQuery(l.map.div.layout).off("mapp.render",v),jQuery(l.map.div.layout).on("mapp.render",(function(e){return v()})))}),[l.map]),m((function(){var t=function(t){g({isFetchingMap:t.isFetchingMap,isSavingMap:t.isSavingMap,mapdata:t.maps[e.mapid]})};return p.store.subscribe(t),function(){return p.store.unsubscribe(t)}})),m((function(){e.mapid&&p.store.fetchMap({mapid:e.mapid})}),[e.mapid]),m((function(){if(!l.isFetchingMap){var t={editable:!0,embed:!0,layout:"left",mapOpts:{streetViewControl:!1},menu:!1,name:"media-map",poiList:!1,sel:jQuery(d.current)};"map"!=e.context&&"mashup"!=e.context||(t.center=null,t.zoom=null);var n=new p.Map(l.mapdata,t);new p.Editor(n);g({map:n})}}),[l.mapdata]),m((function(){l.map&&setTimeout((function(){return l.map.resize()}),100)}),[l.isPoiListOpen]),u("div",{className:"mapp-edit"},(t=l.map&&!l.isFetchingMap&&l.map.title?l.map.title:"",n=l.map&&!l.isFetchingMap?__("Untitled"):"",u("div",{className:"mapp-gt-modal-header"},u(y,{className:"mapp-edit-title",placeholder:n,value:t,onChange:function(e){return w("change-title",e)}}))),u("div",{className:"mapp-edit-main"},u("div",{className:"mapp-list mapp-edit-list"+(l.isPoiListOpen?" mapp-list-open":"")},u("div",{className:"mapp-edit-list-wrapper"},function(){if("mce"!=e.context&&"library"!=e.context)return null;if(!l.map)return null;var t=l.map,n=t.center,r=t.height,o=t.poiList,i=t.width,s=t.zoom;return u("div",{className:"mapp-gt-inspector"},u(a.MappSettings,{map:l.map,context:e.context,onAction:w,center:n,height:r,poiList:o,width:i,zoom:s}))}(),function(){if(l.map){var e=function(e,t){var n=l.dragging,a=n<a?t-1:t;l.map.pois_.splice(a,0,l.map.pois_.splice(n,1)[0]),g({map:l.map,dragover:null})};return u("div",{className:"mapp-items"},_.map(l.map.pois_,(function(t,n){return u("div",{className:l.dragover==n?"mapp-item mapp-edit-dragover":"mapp-item",draggable:!0,key:n,onClick:function(){return l.map.poiOpen(l.map.pois_[n])},onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){return g({dragging:n})},onDragEnter:function(e){return g({dragover:n})},onDragEnd:function(e){return g({dragging:null,dragover:null})},onDrop:function(t){return e(t,n)}},u("img",{className:"mapp-icon",src:p.Icons.getUrl(t.iconid)}),u("div",{className:"mapp-title"},t.title))})))}}()),u("div",{className:"mapp-list-toggle",onClick:function(){return g({isPoiListOpen:!l.isPoiListOpen})}})),u("div",{className:"mapp-edit-map",key:e.mapid,ref:d,onKeyDown:function(e){return e.stopPropagation()},tabIndex:-1}),d.current&&l.map?u(r.m,{map:l.map,selected:l.map.mapTypeId,onChange:function(e){return w("change-settings",{mapTypeId:e})}}):null),u("div",{className:"mapp-edit-toolbar",tabIndex:-1,onKeyDown:function(e){return e.stopPropagation()}},u(b,{isPrimary:!0,isBusy:l.isSavingMap,onClick:function(){return w("save")}},__("Save")),u(b,{disabled:l.isSavingMap,onClick:function(){return w("close")}},__("Cancel")),u(b,{disabled:!e.mapid||l.isSavingMap,isDestructive:!0,className:"mapp-edit-delete",onClick:function(){return w("trash")}},__("Trash"))))}},143:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappIconPicker:()=>C});var a=n(525),r=n(824);function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d=wp.element.createElement,m=wp.element,f=m.Fragment,h=m.useEffect,g=(m.useLayoutEffect,m.useCallback,m.useRef,m.useState),b=(wp.data.useSelect,wp.compose.withState,wp.components),y=b.Button,v=(b.ColorPicker,b.DropZone,b.DropZoneProvider,b.FormFileUpload),w=b.Modal,k=(b.Popover,b.RangeControl),__=(b.Spinner,b.TabPanel,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")}),O=[{id:"mapp-shapes",fontFamily:"Marker Shapes",glyphs:[{name:"circle",center:[16,16]},{name:"widepin",center:[16,14]},{name:"route",center:[16,16]},{name:"shield",center:[16,16]},{name:"squarepin",center:[16,15]},{name:"square",center:[16,16]},{name:"squarerounded",center:[16,16]},{name:"roundpin",center:[16,13]},{name:"pin",center:null},{name:"pindot",center:null}]}],S=[{id:"mapp-icons",className:"mapp-marker-icons",filePrefix:"mp",fontFamily:"Marker Icons",label:"Map icons",glyphs:["airport","amusement-park","aquarium","archery","art-gallery","assistive-listening","atm","audio-description","bakery","bank","bar","baseball","beauty-salon","bicycle-store","bicycling","boat-ramp","boat-tour","boating","book-store","bowling-alley","braille","bus-station","cafe","campground","canoe","car-dealer","car-rental","car-repair","car-wash","casino","cemetery","chairlift","church","city-hall","closed-captioning","clothing-store","compass","convenience-store","courthouse","cross-country-skiing","crosshairs","dentist","department-store","diving","doctor","electrician","electronics-store","embassy","expand","female","finance","fire-station","fish-cleaning","fishing-pier","fishing","florist","food","fullscreen","funeral-home","furniture-store","gas-station","contractor","golf","grocery","gym","hair-care","hang-gliding","hardware-store","health","hindu-temple","horse-riding","hospital","ice-fishing","ice-skating","inline-skating","insurance-agency","jet-skiing","jewelry-store","kayaking","laundry","lawyer","library","liquor-store","local-government","location-arrow","locksmith","lodging","low-vision-access","male","marina","mosque","motobike-trail","movie-rental","movie-theater","moving-company","museum","natural-feature","night-club","open-captioning","painter","park","parking","pet-store","pharmacy","physiotherapist","place-of-worship","playground","plumber","point-of-interest","police","political","post-box","post-office","rafting","real-estate-agency","restaurant","roofing-contractor","route","rv-park","sailing","school","scuba-diving","search","shopping-mall","sign-language","skateboarding","ski-jumping","skiing","sledding","snow-shoeing","snow","snowboarding","snowmobile","spa","stadium","storage","store","subway-station","surfing","swimming","synagogue","taxi-stand","tennis","toilet","trail-walking","train-station","transit-station","travel-agency","unisex","university","veterinary-care","viewing","volume-control-telephone","walking","waterskiing","whale-watching","wheelchair","wind-surfing","zoo"]},{id:"material-icons",className:"material-icons",filePrefix:"mi",fontFamily:"Material Icons",label:"Material Icons",glyphs:["ac_unit","access_alarm","access_alarms","access_time","access_time_filled","accessibility","accessibility_new","accessible","accessible_forward","account_balance","account_balance_wallet","account_box","account_circle","account_tree","ad_units","adb","add","add_a_photo","add_alarm","add_alert","add_box","add_business","add_chart","add_circle","add_circle_outline","add_comment","add_ic_call","add_link","add_location","add_location_alt","add_moderator","add_photo_alternate","add_reaction","add_road","add_shopping_cart","add_task","add_to_drive","add_to_home_screen","add_to_photos","add_to_queue","addchart","adjust","admin_panel_settings","ads_click","agriculture","air","airline_seat_flat","airline_seat_flat_angled","airline_seat_individual_suite","airline_seat_legroom_extra","airline_seat_legroom_normal","airline_seat_legroom_reduced","airline_seat_recline_extra","airline_seat_recline_normal","airplane_ticket","airplanemode_active","airplanemode_inactive","airplanemode_off","airplanemode_on","airplay","airport_shuttle","alarm","alarm_add","alarm_off","alarm_on","album","align_horizontal_center","align_horizontal_left","align_horizontal_right","align_vertical_bottom","align_vertical_center","align_vertical_top","all_inbox","all_inclusive","all_out","alt_route","alternate_email","amp_stories","analytics","anchor","android","animation","announcement","aod","apartment","api","app_blocking","app_registration","app_settings_alt","approval","apps","architecture","archive","area_chart","arrow_back","arrow_back_ios","arrow_back_ios_new","arrow_circle_down","arrow_circle_up","arrow_downward","arrow_drop_down","arrow_drop_down_circle","arrow_drop_up","arrow_forward","arrow_forward_ios","arrow_left","arrow_right","arrow_right_alt","arrow_upward","art_track","article","aspect_ratio","assessment","assignment","assignment_ind","assignment_late","assignment_return","assignment_returned","assignment_turned_in","assistant","assistant_direction","assistant_photo","atm","attach_email","attach_file","attach_money","attachment","attractions","attribution","audiotrack","auto_awesome","auto_awesome_mosaic","auto_awesome_motion","auto_delete","auto_fix_high","auto_fix_normal","auto_fix_off","auto_graph","auto_stories","autofps_select","autorenew","av_timer","baby_changing_station","back_hand","backpack","backspace","backup","backup_table","badge","bakery_dining","balcony","ballot","bar_chart","batch_prediction","bathroom","bathtub","battery_alert","battery_charging_full","battery_full","battery_saver","battery_std","battery_unknown","beach_access","bed","bedroom_baby","bedroom_child","bedroom_parent","bedtime","beenhere","bento","bike_scooter","biotech","blender","block","bloodtype","bluetooth","bluetooth_audio","bluetooth_connected","bluetooth_disabled","bluetooth_drive","bluetooth_searching","blur_circular","blur_linear","blur_off","blur_on","bolt","book","book_online","bookmark","bookmark_add","bookmark_added","bookmark_border","bookmark_outline","bookmark_remove","bookmarks","border_all","border_bottom","border_clear","border_color","border_horizontal","border_inner","border_left","border_outer","border_right","border_style","border_top","border_vertical","branding_watermark","breakfast_dining","brightness_1","brightness_2","brightness_3","brightness_4","brightness_5","brightness_6","brightness_7","brightness_auto","brightness_high","brightness_low","brightness_medium","broken_image","browser_not_supported","brunch_dining","brush","bubble_chart","bug_report","build","build_circle","bungalow","burst_mode","bus_alert","business","business_center","cabin","cable","cached","cake","calculate","calendar_today","calendar_view_day","calendar_view_month","calendar_view_week","call","call_end","call_made","call_merge","call_missed","call_missed_outgoing","call_received","call_split","call_to_action","camera","camera_alt","camera_enhance","camera_front","camera_indoor","camera_outdoor","camera_rear","camera_roll","cameraswitch","campaign","cancel","cancel_presentation","cancel_schedule_send","car_rental","car_repair","card_giftcard","card_membership","card_travel","carpenter","cases","casino","cast","cast_connected","cast_for_education","catching_pokemon","category","celebration","cell_wifi","center_focus_strong","center_focus_weak","chair","chair_alt","chalet","change_circle","change_history","charging_station","chat","chat_bubble","chat_bubble_outline","check","check_box","check_box_outline_blank","check_circle","check_circle_outline","checklist","checklist_rtl","checkroom","chevron_left","chevron_right","child_care","child_friendly","chrome_reader_mode","circle","circle_notifications","class","clean_hands","cleaning_services","clear","clear_all","close","close_fullscreen","closed_caption","closed_caption_disabled","closed_caption_off","cloud","cloud_circle","cloud_done","cloud_download","cloud_off","cloud_queue","cloud_upload","code","code_off","coffee","coffee_maker","collections","collections_bookmark","color_lens","colorize","comment","comment_bank","commute","compare","compare_arrows","compass_calibration","compost","compress","computer","confirmation_num","confirmation_number","connect_without_contact","connected_tv","construction","contact_mail","contact_page","contact_phone","contact_support","contactless","contacts","content_copy","content_cut","content_paste","content_paste_off","control_camera","control_point","control_point_duplicate","copy","copy_all","copyright","coronavirus","corporate_fare","cottage","countertops","create","create_new_folder","credit_card","credit_card_off","credit_score","crib","crop","crop_16_9","crop_3_2","crop_5_4","crop_7_5","crop_din","crop_free","crop_landscape","crop_original","crop_portrait","crop_rotate","crop_square","cruelty_free","cut","dangerous","dark_mode","dashboard","dashboard_customize","data_exploration","data_saver_off","data_saver_on","data_usage","date_range","deck","dehaze","delete","delete_forever","delete_outline","delete_sweep","delivery_dining","departure_board","description","design_services","desktop_access_disabled","desktop_mac","desktop_windows","details","developer_board","developer_board_off","developer_mode","device_hub","device_thermostat","device_unknown","devices","devices_other","dialer_sip","dialpad","dining","dinner_dining","directions","directions_bike","directions_boat","directions_boat_filled","directions_bus","directions_bus_filled","directions_car","directions_car_filled","directions_ferry","directions_off","directions_railway","directions_railway_filled","directions_run","directions_subway","directions_subway_filled","directions_train","directions_transit","directions_transit_filled","directions_walk","dirty_lens","disabled_by_default","disabled_visible","disc_full","dnd_forwardslash","dns","do_disturb","do_disturb_alt","do_disturb_off","do_disturb_on","do_not_disturb","do_not_disturb_alt","do_not_disturb_off","do_not_disturb_on","do_not_disturb_on_total_silence","do_not_step","do_not_touch","dock","document_scanner","domain","domain_disabled","domain_verification","done","done_all","done_outline","donut_large","donut_small","door_back","door_front","door_sliding","doorbell","double_arrow","downhill_skiing","download","download_done","download_for_offline","downloading","drafts","drag_handle","drag_indicator","draw","drive_eta","drive_file_move","drive_file_move_rtl","drive_file_rename_outline","drive_folder_upload","dry","dry_cleaning","duo","dvr","dynamic_feed","dynamic_form","e_mobiledata","earbuds","earbuds_battery","east","eco","edgesensor_high","edgesensor_low","edit","edit_attributes","edit_calendar","edit_location","edit_location_alt","edit_note","edit_notifications","edit_off","edit_road","eject","elderly","electric_bike","electric_car","electric_moped","electric_rickshaw","electric_scooter","electrical_services","elevator","email","emergency","emoji_emotions","emoji_events","emoji_flags","emoji_food_beverage","emoji_nature","emoji_objects","emoji_people","emoji_symbols","emoji_transportation","engineering","enhance_photo_translate","enhanced_encryption","equalizer","error","error_outline","escalator","escalator_warning","euro","euro_symbol","ev_station","event","event_available","event_busy","event_note","event_seat","exit_to_app","expand","expand_less","expand_more","explicit","explore","explore_off","exposure","exposure_minus_1","exposure_minus_2","exposure_neg_1","exposure_neg_2","exposure_plus_1","exposure_plus_2","exposure_zero","extension","extension_off","face","face_retouching_natural","face_retouching_off","face_unlock","facebook","fact_check","family_restroom","fast_forward","fast_rewind","fastfood","favorite","favorite_border","favorite_outline","featured_play_list","featured_video","feed","feedback","female","fence","festival","fiber_dvr","fiber_manual_record","fiber_new","fiber_pin","fiber_smart_record","file_copy","file_download","file_download_done","file_download_off","file_present","file_upload","filter","filter_1","filter_2","filter_3","filter_4","filter_5","filter_6","filter_7","filter_8","filter_9","filter_9_plus","filter_alt","filter_b_and_w","filter_center_focus","filter_drama","filter_frames","filter_hdr","filter_list","filter_none","filter_tilt_shift","filter_vintage","find_in_page","find_replace","fingerprint","fire_extinguisher","fireplace","first_page","fit_screen","fitness_center","flag","flaky","flare","flash_auto","flash_off","flash_on","flashlight_off","flashlight_on","flatware","flight","flight_land","flight_takeoff","flip","flip_camera_android","flip_camera_ios","flip_to_back","flip_to_front","flourescent","flutter_dash","fmd_bad","fmd_good","folder","folder_open","folder_shared","folder_special","follow_the_signs","font_download","font_download_off","food_bank","format_align_center","format_align_justify","format_align_left","format_align_right","format_bold","format_clear","format_color_fill","format_color_reset","format_color_text","format_indent_decrease","format_indent_increase","format_italic","format_line_spacing","format_list_bulleted","format_list_numbered","format_list_numbered_rtl","format_paint","format_quote","format_shapes","format_size","format_strikethrough","format_textdirection_l_to_r","format_textdirection_r_to_l","format_underline","format_underlined","forum","forward","forward_10","forward_30","forward_5","forward_to_inbox","foundation","free_breakfast","free_cancellation","front_hand","fullscreen","fullscreen_exit","functions","g_mobiledata","g_translate","gamepad","games","garage","gavel","generating_tokens","gesture","get_app","gif","gite","golf_course","gpp_bad","gpp_good","gpp_maybe","gps_fixed","gps_not_fixed","gps_off","grade","gradient","grading","grain","graphic_eq","grass","grid_3x3","grid_4x4","grid_goldenratio","grid_off","grid_on","grid_view","group","group_add","group_off","group_work","groups","h_mobiledata","h_plus_mobiledata","hail","handyman","hardware","hd","hdr_auto","hdr_auto_select","hdr_enhanced_select","hdr_off","hdr_off_select","hdr_on","hdr_on_select","hdr_plus","hdr_strong","hdr_weak","headphones","headphones_battery","headset","headset_mic","headset_off","healing","health_and_safety","hearing","hearing_disabled","height","help","help_center","help_outline","hevc","hide_image","hide_source","high_quality","highlight","highlight_alt","highlight_off","highlight_remove","hiking","history","history_edu","history_toggle_off","holiday_village","home","home_max","home_mini","home_repair_service","home_work","horizontal_distribute","horizontal_rule","horizontal_split","hot_tub","hotel","hotel_class","hourglass_bottom","hourglass_disabled","hourglass_empty","hourglass_full","hourglass_top","house","house_siding","houseboat","how_to_reg","how_to_vote","http","https","hvac","ice_skating","icecream","image","image_aspect_ratio","image_not_supported","image_search","imagesearch_roller","import_contacts","import_export","important_devices","inbox","incomplete_circle","indeterminate_check_box","info","input","insert_chart","insert_chart_outlined","insert_comment","insert_drive_file","insert_emoticon","insert_invitation","insert_link","insert_photo","insights","integration_instructions","inventory","inventory_2","invert_colors","invert_colors_off","invert_colors_on","ios_share","iron","iso","kayaking","keyboard","keyboard_alt","keyboard_arrow_down","keyboard_arrow_left","keyboard_arrow_right","keyboard_arrow_up","keyboard_backspace","keyboard_capslock","keyboard_control","keyboard_hide","keyboard_return","keyboard_tab","keyboard_voice","king_bed","kitchen","kitesurfing","label","label_important","label_off","landscape","language","laptop","laptop_chromebook","laptop_mac","laptop_windows","last_page","launch","layers","layers_clear","leaderboard","leak_add","leak_remove","leave_bags_at_home","legend_toggle","lens","lens_blur","library_add","library_add_check","library_books","library_music","light","light_mode","lightbulb","line_style","line_weight","linear_scale","link","link_off","linked_camera","liquor","list","list_alt","live_help","live_tv","living","local_activity","local_airport","local_atm","local_attraction","local_bar","local_cafe","local_car_wash","local_convenience_store","local_dining","local_drink","local_fire_department","local_florist","local_gas_station","local_grocery_store","local_hospital","local_hotel","local_laundry_service","local_library","local_mall","local_movies","local_offer","local_parking","local_pharmacy","local_phone","local_pizza","local_play","local_police","local_post_office","local_print_shop","local_printshop","local_restaurant","local_see","local_shipping","local_taxi","location_city","location_disabled","location_history","location_off","location_on","location_searching","lock","lock_clock","lock_open","login","logout","looks","looks_3","looks_4","looks_5","looks_6","looks_one","looks_two","loop","loupe","low_priority","loyalty","lte_mobiledata","lte_plus_mobiledata","luggage","lunch_dining","mail","mail_outline","male","manage_accounts","manage_search","map","maps_home_work","maps_ugc","margin","mark_as_unread","mark_chat_read","mark_chat_unread","mark_email_read","mark_email_unread","markunread","markunread_mailbox","masks","maximize","media_bluetooth_off","media_bluetooth_on","mediation","medical_services","medication","meeting_room","memory","menu","menu_book","menu_open","merge_type","message","messenger","messenger_outline","mic","mic_external_off","mic_external_on","mic_none","mic_off","microwave","military_tech","minimize","miscellaneous_services","missed_video_call","mms","mobile_friendly","mobile_off","mobile_screen_share","mobiledata_off","mode","mode_comment","mode_edit","mode_edit_outline","mode_night","mode_standby","model_training","monetization_on","money","money_off","money_off_csred","monitor","monitor_weight","monochrome_photos","mood","mood_bad","moped","more","more_horiz","more_time","more_vert","motion_photos_auto","motion_photos_off","motion_photos_on","motion_photos_pause","motion_photos_paused","motorcycle","mouse","move_to_inbox","movie","movie_creation","movie_filter","moving","mp","multiline_chart","multiple_stop","multitrack_audio","museum","music_note","music_off","music_video","my_library_add","my_library_books","my_library_music","my_location","nat","nature","nature_people","navigate_before","navigate_next","navigation","near_me","near_me_disabled","nearby_error","nearby_off","network_cell","network_check","network_locked","network_wifi","new_label","new_releases","next_plan","next_week","nfc","night_shelter","nightlife","nightlight","nightlight_round","nights_stay","no_accounts","no_backpack","no_cell","no_drinks","no_encryption","no_encryption_gmailerrorred","no_flash","no_food","no_luggage","no_meals","no_meeting_room","no_photography","no_sim","no_stroller","no_transfer","nordic_walking","north","north_east","north_west","not_accessible","not_interested","not_listed_location","not_started","note","note_add","note_alt","notes","notification_add","notification_important","notifications","notifications_active","notifications_none","notifications_off","notifications_on","notifications_paused","now_wallpaper","now_widgets","offline_bolt","offline_pin","offline_share","ondemand_video","online_prediction","opacity","open_in_browser","open_in_full","open_in_new","open_in_new_off","open_with","other_houses","outbond","outbound","outbox","outdoor_grill","outlet","outlined_flag","padding","pages","pageview","paid","palette","pan_tool","panorama","panorama_fish_eye","panorama_fisheye","panorama_horizontal","panorama_horizontal_select","panorama_photosphere","panorama_photosphere_select","panorama_vertical","panorama_vertical_select","panorama_wide_angle","panorama_wide_angle_select","paragliding","park","party_mode","password","paste","pattern","pause","pause_circle","pause_circle_filled","pause_circle_outline","pause_presentation","payment","payments","pedal_bike","pending","pending_actions","people","people_alt","people_outline","perm_camera_mic","perm_contact_cal","perm_contact_calendar","perm_data_setting","perm_device_info","perm_device_information","perm_identity","perm_media","perm_phone_msg","perm_scan_wifi","person","person_add","person_add_alt","person_add_alt_1","person_add_disabled","person_off","person_outline","person_pin","person_pin_circle","person_remove","person_remove_alt_1","person_search","personal_injury","personal_video","pest_control","pest_control_rodent","pets","phone","phone_android","phone_bluetooth_speaker","phone_callback","phone_disabled","phone_enabled","phone_forwarded","phone_in_talk","phone_iphone","phone_locked","phone_missed","phone_paused","phonelink","phonelink_erase","phonelink_lock","phonelink_off","phonelink_ring","phonelink_setup","photo","photo_album","photo_camera","photo_camera_back","photo_camera_front","photo_filter","photo_library","photo_size_select_actual","photo_size_select_large","photo_size_select_small","piano","piano_off","picture_as_pdf","picture_in_picture","picture_in_picture_alt","pie_chart","pie_chart_outline","pin","pin_drop","pin_end","pin_invoke","pivot_table_chart","place","plagiarism","play_arrow","play_circle","play_circle_fill","play_circle_filled","play_circle_outline","play_disabled","play_for_work","play_lesson","playlist_add","playlist_add_check","playlist_play","plumbing","plus_one","podcasts","point_of_sale","policy","poll","polymer","pool","portable_wifi_off","portrait","post_add","power","power_input","power_off","power_settings_new","precision_manufacturing","pregnant_woman","present_to_all","preview","price_change","price_check","print","print_disabled","priority_high","privacy_tip","private_connectivity","production_quantity_limits","psychology","public","public_off","publish","published_with_changes","push_pin","qr_code","qr_code_2","qr_code_scanner","query_builder","query_stats","question_answer","queue","queue_music","queue_play_next","quick_contacts_dialer","quick_contacts_mail","quickreply","quiz","r_mobiledata","radar","radio","radio_button_checked","radio_button_off","radio_button_on","radio_button_unchecked","railway_alert","ramen_dining","rate_review","raw_off","raw_on","read_more","real_estate_agent","receipt","receipt_long","recent_actors","recommend","record_voice_over","recycling","redeem","redo","reduce_capacity","refresh","remember_me","remove","remove_circle","remove_circle_outline","remove_done","remove_from_queue","remove_moderator","remove_red_eye","remove_shopping_cart","reorder","repeat","repeat_on","repeat_one","repeat_one_on","replay","replay_10","replay_30","replay_5","replay_circle_filled","reply","reply_all","report","report_gmailerrorred","report_off","report_problem","request_page","request_quote","reset_tv","restart_alt","restaurant","restaurant_menu","restore","restore_from_trash","restore_page","reviews","rice_bowl","ring_volume","roofing","room","room_preferences","room_service","rotate_90_degrees_ccw","rotate_left","rotate_right","rounded_corner","router","rowing","rss_feed","rsvp","rtt","rule","rule_folder","run_circle","running_with_errors","rv_hookup","safety_divider","sailing","sanitizer","satellite","save","save_alt","saved_search","savings","scanner","scatter_plot","schedule","schedule_send","schema","school","science","score","screen_lock_landscape","screen_lock_portrait","screen_lock_rotation","screen_rotation","screen_search_desktop","screen_share","screenshot","sd","sd_card","sd_card_alert","sd_storage","search","search_off","security","security_update","security_update_good","security_update_warning","segment","select_all","self_improvement","sell","send","send_and_archive","send_to_mobile","sensor_door","sensor_window","sensors","sensors_off","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_satisfied_alt","sentiment_very_dissatisfied","sentiment_very_satisfied","set_meal","settings","settings_accessibility","settings_applications","settings_backup_restore","settings_bluetooth","settings_brightness","settings_cell","settings_display","settings_ethernet","settings_input_antenna","settings_input_component","settings_input_composite","settings_input_hdmi","settings_input_svideo","settings_overscan","settings_phone","settings_power","settings_remote","settings_suggest","settings_system_daydream","settings_voice","share","share_arrival_time","share_location","shield","shop","shop_2","shop_two","shopping_bag","shopping_basket","shopping_cart","short_text","shortcut","show_chart","shower","shuffle","shuffle_on","shutter_speed","sick","signal_cellular_0_bar","signal_cellular_4_bar","signal_cellular_alt","signal_cellular_connected_no_internet_0_bar","signal_cellular_connected_no_internet_4_bar","signal_cellular_no_sim","signal_cellular_nodata","signal_cellular_null","signal_cellular_off","signal_wifi_0_bar","signal_wifi_4_bar","signal_wifi_4_bar_lock","signal_wifi_bad","signal_wifi_connected_no_internet_4","signal_wifi_off","signal_wifi_statusbar_4_bar","signal_wifi_statusbar_connected_no_internet_4","signal_wifi_statusbar_null","sim_card","sim_card_alert","sim_card_download","single_bed","sip","skateboarding","skip_next","skip_previous","sledding","slideshow","slow_motion_video","smart_button","smart_display","smart_screen","smart_toy","smartphone","smoke_free","smoking_rooms","sms","sms_failed","snippet_folder","snooze","snowboarding","snowmobile","snowshoeing","soap","social_distance","sort","sort_by_alpha","source","south","south_east","south_west","spa","space_bar","space_dashboard","speaker","speaker_group","speaker_notes","speaker_notes_off","speaker_phone","speed","spellcheck","splitscreen","sports","sports_bar","sports_baseball","sports_basketball","sports_cricket","sports_esports","sports_football","sports_golf","sports_handball","sports_hockey","sports_kabaddi","sports_mma","sports_motorsports","sports_rugby","sports_score","sports_soccer","sports_tennis","sports_volleyball","square_foot","stacked_bar_chart","stacked_line_chart","stairs","star","star_border","star_border_purple500","star_half","star_outline","star_purple500","star_rate","stars","stay_current_landscape","stay_current_portrait","stay_primary_landscape","stay_primary_portrait","sticky_note_2","stop","stop_circle","stop_screen_share","storage","store","store_mall_directory","storefront","storm","straighten","stream","streetview","strikethrough_s","stroller","style","subdirectory_arrow_left","subdirectory_arrow_right","subject","subscript","subscriptions","subtitles","subtitles_off","subway","summarize","superscript","supervised_user_circle","supervisor_account","support","support_agent","surfing","surround_sound","swap_calls","swap_horiz","swap_horizontal_circle","swap_vert","swap_vert_circle","swap_vertical_circle","swipe","switch_account","switch_camera","switch_left","switch_right","switch_video","sync","sync_alt","sync_disabled","sync_problem","system_security_update","system_security_update_good","system_security_update_warning","system_update","system_update_alt","system_update_tv","tab","tab_unselected","table_chart","table_rows","table_view","tablet","tablet_android","tablet_mac","tag","tag_faces","takeout_dining","tap_and_play","tapas","task","task_alt","taxi_alert","terrain","text_fields","text_format","text_rotate_up","text_rotate_vertical","text_rotation_angledown","text_rotation_angleup","text_rotation_down","text_rotation_none","text_snippet","textsms","texture","theater_comedy","theaters","thermostat","thermostat_auto","thumb_down","thumb_down_alt","thumb_down_off_alt","thumb_up","thumb_up_alt","thumb_up_off_alt","thumbs_up_down","time_to_leave","timelapse","timeline","timer","timer_10","timer_10_select","timer_3","timer_3_select","timer_off","tips_and_updates","title","toc","today","toggle_off","toggle_on","toll","tonality","topic","touch_app","tour","toys","track_changes","traffic","train","tram","transfer_within_a_station","transform","transgender","transit_enterexit","translate","travel_explore","trending_down","trending_flat","trending_neutral","trending_up","trip_origin","try","tty","tune","tungsten","turned_in","turned_in_not","tv","tv_off","two_wheeler","umbrella","unarchive","undo","unfold_less","unfold_more","unpublished","unsubscribe","upcoming","update","update_disabled","upgrade","upload","upload_file","usb","usb_off","verified","verified_user","vertical_align_bottom","vertical_align_center","vertical_align_top","vertical_distribute","vertical_split","vibration","video_call","video_camera_back","video_camera_front","video_collection","video_label","video_library","video_settings","video_stable","videocam","videocam_off","videogame_asset","videogame_asset_off","view_agenda","view_array","view_carousel","view_column","view_comfortable","view_comfy","view_compact","view_day","view_headline","view_in_ar","view_list","view_module","view_quilt","view_sidebar","view_stream","view_week","vignette","villa","visibility","visibility_off","voice_chat","voice_over_off","voicemail","volume_down","volume_mute","volume_off","volume_up","volunteer_activism","vpn_key","vpn_lock","vrpano","wallet_giftcard","wallet_membership","wallet_travel","wallpaper","warning","warning_amber","wash","watch","watch_later","water","water_damage","water_drop","waterfall_chart","waves","waving_hand","wb_auto","wb_cloudy","wb_incandescent","wb_iridescent","wb_shade","wb_sunny","wb_twilight","wc","web","web_asset","web_asset_off","weekend","west","whatshot","wheelchair_pickup","where_to_vote","widgets","wifi","wifi_calling","wifi_calling_3","wifi_lock","wifi_off","wifi_protected_setup","wifi_tethering","wifi_tethering_error_rounded","wifi_tethering_off","window","wine_bar","work","work_off","work_outline","workspaces","wrap_text","wrong_location","wysiwyg","yard","youtube_searched_for","zoom_in","zoom_out","zoom_out_map"]}];function C(e){var t,n=c(g({defaultIcon:mappl10n.options.defaultIcon,filename:null,filter:"",glyph:"",glyphColor:"white",glyphFont:S[0],glyphSize:20,isOpen:!1,mode:"list",shape:"circle",shapeColor:"gray",shapeFont:O[0],toDelete:[],userIcons:mappl10n.options.userIcons}),2),i=n[0],s=n[1];function p(e){s((function(t){return l(l({},t),e)}))}function u(t,n){switch(t){case"bulk-select":var a=o(i.toDelete),r=i.toDelete.indexOf(n.iconid);r>=0?a.splice(r,1):a.push(n.iconid),p({toDelete:a});break;case"close":p({isOpen:!1});break;case"delete":confirm(mappl10n.delete_prompt)&&mapp.lib.ajax({type:"POST",data:{action:"mapp_icon_delete",iconids:i.toDelete,nonce:mappl10n.options.nonce},callback:function(t){t&&"OK"==t.status?(i.toDelete.indexOf(e.iconid)>=0&&!function(e){if(!e)return!1;var t=e.replace(/.png|.gif|.jpg/gi,"").toLowerCase();return mappl10n.options.standardIcons.indexOf(t)>=0}(e.iconid)&&e.onChange(null),mappl10n.options.userIcons=t.data,p({toDelete:[],mode:"list",userIcons:mappl10n.options.userIcons})):alert("Delete error: "+t.status)}});break;case"edit-cancel":p({mode:"list"});break;case"edit-save":!function(e){var t=32,n=2,a=document.createElement("canvas");a.width=t*n,a.height=t*n,a.style.imageRendering="pixelated";var r=a.getContext("2d");r.font=t*n+"px "+i.shapeFont.fontFamily,r.fillStyle=i.shapeColor,r.textBaseline="bottom",r.fillText(i.shape,0,t*n),r.strokeStyle="white",r.strokeText(i.shape,1,t*n);var o=_.findWhere(i.shapeFont.glyphs,{name:i.shape});if(i.glyph&&o.center){r.imageSmoothingEnabled=!1,r.font=i.glyphSize*n+"px "+i.glyphFont.fontFamily,r.fillStyle=i.glyphColor;var l=[o.center[0]*n,o.center[1]*n];r.fillText(i.glyph,l[0]-i.glyphSize,l[1]+i.glyphSize)}"undefined"!=typeof debug?document.getElementById("mapp-edit-debug").append(a):a.toBlob((function(e){var t=new FormData;t.append("image0",e,i.filename),b(t)}),"image/png",100)}();break;case"edit-upload":l=n,s=new FormData,_.map(l,(function(e,t){e.type.match("image.*")?s.append("image"+t,e):alert("File "+e.name+" is not an image.")})),b(s);break;case"list-select":e.onChange&&e.onChange(n),u("close");break;case"mode":p("bulk"==n?{mode:n,toDelete:[]}:{mode:n});break;case"open":p({isOpen:!0})}var l,s}function m(t){var n="user"==t?mappl10n.options.userIcons:mappl10n.options.standardIcons;return _.map(n,(function(n){if("standard"==t&&function(e){return mappl10n.options.userIcons.indexOf(e)>=0}(n+".png"))return"";var a="mapp-icon-wrapper";return"bulk"==i.mode&&i.toDelete.indexOf(n)>=0?a+=" mapp-bulk-selected":"list"!=i.mode||e.iconid!=n&&e.iconid+".png"!=n||(a+=" mapp-selected"),d("div",{alt:n,className:a,key:n,onClick:function(){"list"==i.mode?u("list-select",n):"user"==t&&u("bulk-select",{iconid:n,type:t})}},d("img",{className:"mapp-icon",src:mapp.Icons.getUrl(n),title:n}))}))}function b(t){t.append("action","mapp_icon_save"),t.append("nonce",mappl10n.options.nonce),mapp.lib.ajax({type:"POST",contentType:!1,processData:!1,data:t,success:function(t){t&&"OK"==t.status?(mappl10n.options.userIcons=t.data.icons,p({userIcons:mappl10n.options.userIcons}),p({mode:"list"}),e.onChange&&e.onChange(t.data.filename)):alert("Upload error: "+t.status)}})}return h((function(){var e=i.glyph?i.glyph:i.shape;p({filename:e+=".png"})}),[i.shape,i.shapeColor,i.glyphFont,i.glyph,i.glyphColor,i.glyphSize]),d(f,null,d("img",{className:"mapp-icon",onClick:function(){return u("open",null)},src:mapp.Icons.getUrl(e.iconid)}),"list"==i.mode&&i.isOpen&&d(w,{title:d("div",{className:"mapp-icons-title"},__("Select icon"),d(y,{disabled:"bulk"==i.mode,isPrimary:!0,onClick:function(){return u("mode","edit")}},__("New icon"))),className:"mapp-icons-modal",onRequestClose:function(){return u("close")}},d("div",{className:"mapp-icons"},d("div",{className:"mapp-icons-list"},mappl10n.options.userIcons.length>0&&d("div",{className:"mapp-icons-list-title"},__("Custom icons")),d("div",{className:"mapp-icons-user"},m("user")),mappl10n.options.userIcons.length>0&&d("div",{className:"mapp-icons-list-title"},__("Standard icons")),d("div",{className:"mapp-icons-standard"},m("standard"))),d("div",{className:"mapp-icons-toolbar"},d("div",null,d(y,{disabled:"bulk"==i.mode,isSecondary:!0,onClick:function(){return u("list-select",null)}},__("Use default icon")),mappl10n.options.userIcons.length>0&&d(y,{isTertiary:!0,onClick:function(){return u("mode","bulk")}},__("Edit list"))),d("div",{className:"mapp-icons-filename"},e.iconid?e.iconid:__("No icon selected"))))),"bulk"==i.mode&&i.isOpen&&d(w,{title:d("div",{className:"mapp-icons-title"},__("Select icons to delete")),className:"mapp-icons-modal",onRequestClose:function(){return u("close")}},d("div",{className:"mapp-icons"},d("div",{className:"mapp-icons-list"},d("div",{className:"mapp-icons-user"},m("user"))),d("div",{className:"mapp-icons-toolbar"},d("div",null,d(y,{isDestructive:!0,disabled:i.toDelete.length<1,onClick:function(){return u("delete")}},__("Delete")),d(y,{isSecondary:!0,onClick:function(){return u("mode","list")}},__("Cancel")))))),"edit"==i.mode&&d(w,{title:__("Create new icon"),className:"mapp-icons-edit-modal",onRequestClose:function(){return u("edit-cancel")},shouldCloseOnClickOutside:!1},d("div",{className:"mapp-icons-edit"},d("div",{id:"mapp-edit-debug"}),d("section",null,d("h2",null,__("Shape")),d("span",{className:"mapp-icons-edit-shapes",style:{color:i.shapeColor,fontFamily:i.shapeFont.fontFamily}},_.map(i.shapeFont.glyphs,(function(e,t){var n=i.shape==e.name;return d("span",{className:"mapp-icons-edit-shape-wrapper"+(n?" mapp-selected":""),key:e.name,onClick:function(){return p({shape:e.name})},title:e.name},d("span",{className:"mapp-icons-edit-shape"},e.name,e.center&&i.glyph&&d("div",{className:"mapp-icons-edit-shape-glyph "+i.glyphFont.className,style:{left:e.center[0],top:e.center[1],color:i.glyphColor,fontSize:i.glyphSize,width:i.glyphSize}},i.glyph)))})))),d("section",{className:"mapp-icons-edit-font"},d("h2",null,__("Font")),d(r.Select,{value:i.glyphFont.id,options:_.map(S,(function(e){return{value:e.id,label:e.label}})),onChange:function(e){return p({glyphFont:_.findWhere(S,{id:e}),glyph:null})}}),d("span",null,__("Font size")),d(k,{initialPosition:20,min:16,max:24,value:i.glyphSize,onChange:function(e){return p({glyphSize:e})}})),d("section",null,d("h2",null,__("Color")),d("span",{className:"mapp-icons-edit-colors"},d(a.MappColorPicker,{color:i.shapeColor,isExtended:!1,onChange:function(e){return p({shapeColor:e.color})}}),d("span",null,__("Fill")),d(a.MappColorPicker,{color:i.glyphColor,isExtended:!1,onChange:function(e){return p({glyphColor:e.color})}}),d("span",null,__("Stroke")))),(t=_.filter(i.glyphFont.glyphs,(function(e){return!i.filter||e.includes(i.filter)})),d("div",{className:"mapp-icons-edit-glyphs"},d("section",{className:"mapp-icons-edit-search"},d("h2",null,__("Search")),d(r.Input,{value:i.filter,onChange:function(e){return p({filter:e})}})),d("div",{className:"mapp-icons-edit-glyph-list",style:{color:i.glyphColor}},_.map(t,(function(e,t){return d("div",{tabIndex:0,className:"mapp-icons-edit-glyph-wrapper"+(i.glyph==e?" mapp-selected":""),key:t,onClick:function(){return p({glyph:i.glyph==e?null:e})}},d("span",{className:"mapp-icons-edit-glyph "+i.glyphFont.className},e),d("div",{className:"mapp-icons-edit-glyph-title"},e.replaceAll("_"," ")))}))))),d("div",{className:"mapp-icons-edit-toolbar"},d("div",{className:"mapp-icons-edit-toolbar-left"},d(y,{isPrimary:!0,onClick:function(){return u("edit-save")}},__("Save")),d(y,{isSecondary:!0,onClick:function(){return u("edit-cancel")}},__("Cancel")),d(r.Input,{className:"mapp-icons-filename",value:i.filename,onChange:function(e){return p({filename:e})}})),d("div",null,d(v,{accept:"image/*",icon:"upload",multiple:!0,onChange:function(e){u("edit-upload",e.target.files)}},__("Upload icons")))))))}},816:(e,t,n)=>{"use strict";n.r(t);var a=n(429),r=n(694);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=window.mapp||{},u=wp.element.createElement,d=wp.element,m=d.Fragment,f=d.useEffect,_=(d.useLayoutEffect,d.useRef),h=d.useState,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function g(e){var t=wp.components,n=(t.BaseControl,t.Button),o=(t.ButtonGroup,t.CheckboxControl,t.Dropdown,t.Modal,t.Panel,t.PanelBody,t.PanelRow,t.Placeholder),l=(t.RadioControl,t.SelectControl,t.TextControl,t.ToggleControl,t.Toolbar),c=t.ToolbarButton,d=t.ToolbarGroup,g=wp.blockEditor,b=g.BlockControls,y=g.InspectorControls,v=s(h({isOpen:!1,map:null,mapdata:void 0,pickerMode:"list",pickerMapid:null}),2),w=v[0],k=v[1],O=_(null);function S(e){k((function(t){return i(i({},t),e)}))}function C(t,n){switch(t){case"add":S({isOpen:!0,pickerMapid:null,pickerMode:"edit"}),e.setAttributes({center:void 0,zoom:void 0});break;case"change-settings":e.setAttributes(n);break;case"edit":S({isOpen:!0,pickerMapid:e.attributes.mapid,pickerMode:"edit"});break;case"edit-close":S({isOpen:!1});break;case"pick-trash":e.setAttributes({mapid:void 0,center:void 0,zoom:void 0,width:void 0,height:void 0}),S({isOpen:!1});break;case"pick-close":S({isOpen:!1});break;case"pick-insert":case"pick-duplicate":n!=e.attributes.mapid&&e.setAttributes({center:void 0,mapid:n,zoom:void 0}),S({isOpen:!1});break;case"open":S({isOpen:!0,pickerMapid:e.attributes.mapid,pickerMode:"list"})}}function x(){return u(b,null,u(void 0!==d?d:l,null,e.attributes.mapid&&u(c,{icon:"edit",label:__("Edit map"),onClick:function(){return C("edit")}}),u(c,{icon:"portfolio",label:__("Map Library"),onClick:function(){return C("open")}})))}function P(){if(w.isOpen)return u(r.default,{mapid:w.pickerMapid,mode:w.pickerMode,onAction:C,type:"post"})}return f((function(){var t=function(t){S({mapdata:t.maps[e.attributes.mapid]})};return p.store.subscribe(t),function(){return p.store.unsubscribe(t)}})),f((function(){e.attributes.mapid&&p.store.fetchMap({mapid:e.attributes.mapid})}),[e.attributes.mapid]),f((function(){var t;e.attributes.mapid&&O.current&&w.mapdata&&((t=new p.Map(w.mapdata,{alignment:e.attributes.align,center:e.attributes.center,height:e.attributes.height,mapOpts:{mapTypeControl:!1,streetViewControl:!1},poiList:e.attributes.poiList,sel:jQuery(O.current),width:e.attributes.width,zoom:e.attributes.zoom})).display(),S({map:t}))}),[w.mapdata]),f((function(){"wide"!=e.attributes.align&&"full"!=e.attributes.align||(e.setAttributes({width:"100%"}),w.map&&w.map.setSize({width:"100%"}))}),[e.attributes.align]),e.attributes.preview?u("img",{className:"mapp-gt-preview",src:mappl10n.options.baseurl+"/images/preview.png",width:"100%"}):e.attributes.mapid&&null!==w.mapdata?u(m,null,x(),function(){if(!w.map)return null;var t=e.attributes,n=t.align,r=t.center,o=t.height,i=t.poiList,l=t.width,s=t.zoom;return u(y,null,u("div",{className:"mapp-gt-inspector"},u(a.MappSettings,{map:w.map,alignment:n,context:"map",onAction:C,center:r,height:o,poiList:i,width:l,zoom:s})))}(),u("div",{className:"mapp-gt",ref:O}),P()):u(m,null,u(m,null,x(),u(o,{className:"mapp-gt-placeholder",icon:"location",label:__("MapPress Map"),instructions:__("Use the map library to create a new map or insert an existing map.")},u(n,{icon:"portfolio",isSecondary:!0,onClick:function(){return C("open")}},__("Map Library")))),P())}mappl10n.options.postid&&wp.blocks.registerBlockType("mappress/map",{title:__("MapPress Map"),icon:"location",description:__("Insert a map"),category:mappl10n.options.blockCategory,attributes:{center:{type:"string"},height:{type:"string",default:""},initialOpenDirections:{type:"boolean"},mapid:{type:"string"},mapOpts:{type:"object"},poiList:{type:"boolean"},preview:{type:"boolean",default:!1},width:{type:"string",default:""},zoom:{type:"number"}},supports:{align:["full","wide","center","left","right"]},transforms:{from:[{type:"shortcode",tag:"mappress",attributes:{center:{type:"string",shortcode:function(e){return e.named.center}},height:{type:"string",shortcode:function(e){return e.named.height}},initialOpenDirections:{type:"boolean",shortcode:function(e){return"true"==e.named.initialOpenDirections||"true"==e.named.initialopendirections}},mapid:{type:"string",shortcode:function(e){return e.named.mapid}},poiList:{type:"boolean",shortcode:function(e){return"true"==e.named.poiList||"true"==e.named.poilist}},width:{type:"string",shortcode:function(e){return e.named.width}},zoom:{type:"number",shortcode:function(e){return parseInt(e.named.zoom)?parseInt(e.named.zoom):null}}}},{type:"block",blocks:["core/shortcode"],isMatch:function(e){var t=e.text,n=wp.shortcode.regexp("mappress");return n.lastIndex=0,n.test(t)},transform:function(e){var t=e.text;return wp.blocks.rawHandler({HTML:"<p>"+t+"</p>",mode:"BLOCKS"})}}]},edit:function(e){return u(g,e)},save:function(e){return e},example:{attributes:{preview:!0}}})},378:(e,t,n)=>{"use strict";n.r(t);n(429),n(670),n(308);window.mapp,wp.element.createElement;var a=wp.element,r=(a.Fragment,a.useEffect,a.useLayoutEffect,a.useRef,a.useState,wp.components);r.BaseControl,r.Button,r.ButtonGroup,r.Card,r.CardBody,r.CardFooter,r.CardHeader,r.CheckboxControl,r.ExternalLink,r.HorizontalRule,r.Panel,r.PanelBody,r.PanelRow,r.Placeholder,r.RadioControl,r.SelectControl,r.TabPanel,r.TextControl,r.TextareaControl,r.ToggleControl,r.Toolbar,wp.data.useSelect},498:(e,t,n)=>{"use strict";n.r(t);var a=n(694);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.mapp;var c=wp.element.createElement,p=wp.element,u=p.Fragment,d=(p.useEffect,p.useLayoutEffect,p.useRef,p.useState),m=wp.components,f=(m.Button,m.Dashicon),__=(m.Modal,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function _(){var e=l(d({isOpen:!1,mapid:null}),2),t=e[0],n=e[1];function r(e){n((function(t){return o(o({},t),e)}))}function i(e,t){switch(e){case"pick-close":r({isOpen:!1,mapid:null});break;case"pick-insert":r({isOpen:!1});var n='[mappress mapid="'+t+'"]';"undefined"==typeof wpActiveEditor?__("Please select the post content to insert the map into."):send_to_editor(n);break;case"open":r({isOpen:!0,mapid:s()})}}function s(){var e="undefined"!=typeof tinyMCE&&tinyMCE?tinyMCE.get("content"):null,t=e&&e.selection?e.selection.getSel():null;if(!t||void 0===t.anchorOffset||!t.anchorNode||!t.anchorNode.data)return null;for(var n=null,a=t.anchorNode.data,r=-1,o=t.anchorOffset-1;o>=0;o--){var i=a[o];if("["==i){r=o;break}if("]"==i||"<"==i||">"==i)break}return r>=0&&(n=wp.shortcode.next("mappress",a,r))?n.shortcode.attrs.named.mapid:null}return c(u,null,c("button",{className:"button",type:"button",onClick:function(e){e.preventDefault(),i("open")}},c(f,{className:"wp-media-buttons-icon",icon:"location"}),__("MapPress")),t.isOpen&&c(a.default,{context:"mce",mapid:t.mapid,onAction:i}))}Array.from(document.getElementsByClassName("mapp-mce")).forEach((function(e,t){return wp.element.render(c(_),e)}))},670:(e,t,n)=>{"use strict";function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.r(t),n.d(t,{MappMultiSelect:()=>v});var p=wp.element.createElement,u=wp.element,d=(u.Fragment,u.useEffect),m=(u.useLayoutEffect,u.useRef),f=u.useState,h=wp.components,g=h.BaseControl,b=(h.Button,h.CheckboxControl),y=(h.Panel,h.PanelBody,h.PanelRow,h.Spinner,h.TextControl),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function v(e){var t,n=m(null),r=m(null),i=l(f({isOpen:!1,filter:"",filteredOptions:[]}),2),s=i[0],c=i[1];function u(e){c((function(t){return o(o({},t),e)}))}function h(t){var n=_.findWhere(e.options,{value:t});return n?n.label:t}function v(){var t;return e.values instanceof Array?t=a(e.values):e.values&&(t=[e.values]),t||[]}function w(t,n){var a=v(),r=a.indexOf(t);(n=void 0!==n?n:-1==r)?a.push(t):a.splice(r,1),e.onChange(a)}function k(){return s.isOpen?p("div",{className:"mapp-select-dropdown-wrapper"},p("div",{className:"mapp-select-dropdown"},!s.isOpen||!e.options||e.options.length<10?null:p("div",{className:"mapp-select-filter",ref:r},p(y,{autoComplete:"off",placeholder:__("Search"),value:s.filter,onChange:function(e){return u({filter:e})}})),p("div",{className:"mapp-select-dropdown-list"},(t=v(),0==s.filteredOptions.length?p("div",{className:"mapp-select-dropdown-item"},__("No results")):s.filteredOptions.map((function(e){return p(b,{className:"mapp-select-dropdown-item",checked:t.includes(e.value),key:e.value,onChange:function(t){return w(e.value,t)},label:e.label})})))))):null;var t}return d((function(){if(e.options)if(s.filter){var t=s.filter.toUpperCase();u({filteredOptions:e.options.filter((function(e){return 0==e.label.toUpperCase().indexOf(t)}))})}else u({filteredOptions:e.options})}),[e.options,s.filter]),d((function(){s.isOpen&&r.current&&(jQuery("input",jQuery(r.current)).focus(),u({filter:""}))}),[s.isOpen]),p(g,{className:"mapp-select",label:e.label},p("div",{ref:n,tabIndex:0,onBlur:function(e){return function(e){event.relatedTarget||document.activeElement,n.current.contains(e.relatedTarget)||u({isOpen:!1})}(e)}},((t=v())instanceof Array&&t.map((function(e){return h(e)})),void 0===e.options?p("div",{className:"mapp-select-input"},p("div",{className:"mapp-select-tokens"}),p("span",{className:"dashicons dashicons-arrow-down-alt2"})):p("div",{className:"mapp-select-input",onClick:function(){return u({isOpen:!s.isOpen})}},p("div",{className:"mapp-select-tokens"},t.map((function(e){return p("span",{className:"mapp-select-token",key:e,onClick:function(t){t.stopPropagation(),w(e,!1)}},h(e))}))),p("span",{className:"dashicons "+(s.isOpen?"dashicons-arrow-up-alt2":"dashicons-arrow-down-alt2")}))),k()))}},218:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var a=n(824),r=n(143),o=n(710);function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m=wp.element.createElement,f=wp.element,h=f.Fragment,g=f.useEffect,b=(f.useLayoutEffect,f.useCallback,f.useRef),y=f.useState,v=wp.data.useSelect,w=wp.components,k=w.Button,O=w.Dashicon,__=(w.ExternalLink,w.Modal,w.Panel,w.PanelBody,w.PanelRow,w.Popover,w.RadioControl,w.Spinner,w.TabPanel,wp.i18n.sprintf,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function S(e){var t,n,l,c,u,d,f,w,S,C,x,P=p(y(s(s({},e),{},{isCheckingLicense:!1,isSaving:!1})),2),j=P[0],N=P[1],M=b(null);function I(e){N((function(t){return s(s({},t),e)}))}function E(e){return _.map(e,(function(e,t){return{value:t,label:e}}))}function A(e,t){return e&&Array.isArray(e)&&e.length?(_.map(e,(function(e){for(var t in e)"string"==typeof e[t]&&(e[t]=e[t].trim())})),t?e.filter((function(e){for(var t in e)if(!e[t]||0==e[t].length)return!1;return!0})):e.filter((function(e){return!(e.hasOwnProperty("key")&&!e.key)}))):[]}function D(e,t){switch(e){case"license-check":I({isCheckingLicense:!0}),mapp.lib.ajax({type:"POST",data:{action:"mapp_license_check",nonce:mappl10n.options.nonce,license:j.license},callback:function(e){if(I({isCheckingLicense:!1}),e&&"OK"==e.status){var t=s({},j.helpers);t.license_status=e.data,I({helpers:t})}}});break;case"reset":I({isSaving:!0}),mapp.lib.ajax({type:"POST",data:{action:"mapp_options_reset",nonce:mappl10n.options.nonce},callback:function(e){I({isSaving:!1}),e&&"OK"==e.status&&window.location.reload()}});break;case"save":var n=s({},j);delete n.helpers,n.filters=A(n.filters,!1),n.metaKeys=A(n.metaKeys,!0),n.sizes=A(n.sizes,!0),n.autoicons&&n.autoicons.values&&(n.autoicons.values=A(n.autoicons.values,!0)),I({isSaving:!0}),mapp.lib.ajax({type:"POST",data:{action:"mapp_options_save",nonce:mappl10n.options.nonce,settings:n},callback:function(e){I({isSaving:!1}),e&&"OK"==e.status&&window.location.reload()}})}}return g((function(){M.current&&new mapp.Map(j.helpers.demo_map,{sel:jQuery(M.current)}).display()}),[]),g((function(){mappl10n.options.engine!=j.engine&&D("save")}),[j.engine]),m("div",{className:"mapp-options"},m("form",{onSubmit:function(e){e.preventDefault(),D("save")}},m(a.Section,{title:__("Sample Map"),className:"mapp-demo-section"},m("div",{className:"mapp-options-demo",ref:M})),mappl10n.options.pro&&(!j.helpers.is_multisite||j.helpers.is_super_admin||j.helpers.is_main_site)&&m(a.Section,{title:__("License")},m(a.Option,{title:__("MapPress license key"),className:"mapp-option-license"},m(a.Input,{value:j.license,name:"license",onChange:function(e){var t=s({},j.helpers);t.license_status="",I({license:e,helpers:t})},size:37,placeholder:__("Enter license to enable automatic updates")}),(w=j.helpers.license_status,S=m(k,{isSecondary:!0,href:"https://mappresspro.com/mappress"},__("Get license")),C=m(k,{isBusy:j.isCheckingLicense,isSecondary:!0,onClick:function(){return D("license-check")}},__("Check now")),x=m(k,{isLink:!0,target:"_blank",href:"https://mappresspro.com/account"},__("Your account")),j.license?"active"==w?m("span",{className:"mapp-license-status"},m(O,{icon:"yes"}),__("Active")):m(h,null,C,x,w&&!j.isCheckingLicense&&m("div",null,m(O,{icon:"no"}),"inactive"==w?__("License is invalid or expired"):w)):S)),m(a.Checkbox,{title:__("Beta versions"),label:__("Enable updates for beta versions"),checked:j.betas,onChange:function(e){return I({betas:e})}})),m(a.Section,{title:__("Basic Settings")},m(a.Radios,{title:__("Mapping API"),options:[{label:"Leaflet",value:"leaflet"},{label:"Google",value:"google"}],onChange:function(e){I({engine:e,geocoder:"google"==e?"google":""})},checked:j.engine,help:{href:"#toc-picking-a-mapping-api",text:__("Leaflet is free and requires no API key.  Google requires an API key and has usage limits.")}}),"leaflet"==j.engine&&(d=[{value:"nominatim",label:"Nominatim",disabled:j.mapbox},{value:"mapbox",label:"MapBox",disabled:!j.mapbox},{value:"google",label:"Google",disabled:!j.apiKey}],f={},"nominatim"==j.geocoder&&(f={text:__("Nominatim is free but inaccurate.  Use Mapbox or Google instead."),type:"warning"}),f.href="#toc-picking-a-geocoder",m(a.Option,{title:__("Geocoder")},m(a.Radios,{options:d,checked:j.geocoder,onChange:function(e){return I({geocoder:e})},help:f}))),"leaflet"==j.engine&&(u=m(k,{isSecondary:!0,href:"https://account.mapbox.com/access-tokens/",target:"_blank"},__("Get an Access Token")),m(a.Option,{title:__("Mapbox access token")},m("div",{className:"mapp-option-mapbox"},m(a.Input,{name:"mapbox",value:j.mapbox,onChange:function(e){I({mapbox:e}),I({geocoder:e?"mapbox":"nominatim"})},placeholder:__("Enter token to use Mapbox"),size:50}),u),m("div",{className:"mapp-help-text"},__("Mapbox makes Leaflet maps look great and provides an excellent geocoder.")))),(c=m(k,{isSecondary:!0,href:"https://mappresspro.com/how-to-get-a-google-maps-api-key",target:"_blank"},__("Get an API Key")),m(a.Option,{title:__("Google API key"),className:"mapp-option-apikey"},m(a.Input,{name:"apiKey",value:j.apiKey,onChange:function(e){I({apiKey:e})},placeholder:"google"==j.engine?__("Enter API key to use Google maps"):__("Enter API key to use Google geocoder"),size:50}),c))),m(a.Section,{title:__("Map Settings")},m(a.Radios,{title:__("Automatic display"),options:[{value:"",label:__("None")},{value:"top",label:__("Top of post")},{value:"bottom",label:__("Bottom of post")}],checked:j.autodisplay,onChange:function(e){return I({autodisplay:e})}}),m(a.Radios,{title:__("Map alignment"),options:[{value:"",label:__("Default")},{value:"center",label:__("Center")},{value:"left",label:__("Left")},{value:"right",label:__("Right")}],checked:j.alignment,onChange:function(e){return I({alignment:e})}}),m(a.Radios,{title:__("Directions"),checked:j.directions,options:[{value:"google",label:"Google"},{value:"inline",label:__("Inline")}],onChange:function(e){return I({directions:e})}}),m(a.Option,{title:__("POI list")},m(a.Checkbox,{checked:j.poiList,label:__("Show a list of POIs with each map"),onChange:function(e){return I({poiList:e})}}),m("div",{className:"mapp-option-poilist-radios"},m(a.Radios,{checked:j.layout,options:[{value:"left",label:__("Left of map"),disabled:!j.poiList},{value:"inline",label:__("Below map"),disabled:!j.poiList}],onChange:function(e){return I({layout:e})}}))),m(a.Input,{title:__("Mini width"),value:j.mini,onChange:function(e){return I({mini:e})},size:3,label:__("Width (px) to use map/list toggle buttons")}),m(a.Checkbox,{title:__("Sort"),checked:j.sort,label:__("Sort POI list by title"),onChange:function(e){return I({sort:e})}}),"leaflet"==mappl10n.options.engine&&m(a.Checkbox,{title:__("Scroll wheel zoom"),checked:j.scrollWheel,label:__("Enable map zoom with mouse scroll wheel"),onChange:function(e){return I({scrollWheel:e})}})),m(a.Section,{title:__("Styled Maps")},m(a.Option,{title:__("Default style")},m("div",{className:"mapp-option-style"},m(o.m,{selected:j.style,onChange:function(e){I({style:e}),mappl10n.options.style=e}}),m("div",null,__('Replace the default "roadmap" or "streets" style'))))),m(a.Section,{title:__("POI Settings")},m(a.Select,{title:__("Default zoom"),label:__("Default zoom when displaying a single POI"),value:j.poiZoom,options:_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],(function(e){return{value:e,label:e}})),onChange:function(e){return I({poiZoom:e})}}),m(a.Checkbox,{title:__("Hover"),checked:j.tooltips,label:__("Open POIs on hover"),onChange:function(e){return I({tooltips:e})}}),m(a.Checkbox,{title:__("Open first POI"),checked:j.initialOpenInfo,onChange:function(e){return I({initialOpenInfo:e})},label:__("Open first POI")})),mappl10n.options.pro&&m(a.Section,{title:__("Icons")},m(a.Option,{title:__("Default icon")},m(r.MappIconPicker,{iconid:j.defaultIcon,onChange:function(e){mappl10n.options.defaultIcon=e,I({defaultIcon:e})}})),m(a.Option,{title:__("Icon directory")},m("code",null,j.helpers.icon_directory)),m(a.Option,{title:__("Highlight selected POI")},m(a.Radios,{checked:j.highlight,options:[{value:"",label:__("None")},{value:"circle",label:__("Circle")},{value:"scale",label:__("Scale")},{value:"icon",label:__("Icon")}],onChange:function(e){return I({highlight:e})}}),"icon"==j.highlight&&m(r.MappIconPicker,{defaultIcon:j.defaultIcon,iconid:j.highlightIcon,onChange:function(e){return I({highlightIcon:e})}})),(l=j.iconScale&&Array.isArray(j.iconScale)?i(j.iconScale):[0,0],m(a.Option,{title:__("Icon size")},m(a.Input,{value:l[0]?l[0]:"",onChange:function(e){e<=64&&(l[0]=e>0?e:"",I({iconScale:l}))},placeholder:32,type:"number",min:0,max:64}),m("span",null," X "),m(a.Input,{value:l[1]?l[1]:"",onChange:function(e){e<=64&&(l[1]=e>0?e:"",I({iconScale:l}))},placeholder:32,type:"number",min:0,max:64}),m("span",null," (px) "))),function(){var e=E(j.helpers.taxonomies);e.unshift({value:"post_type",label:__("Post type")});var t=v((function(e){if("post_type"==j.autoicons.key)return E(j.helpers.post_types);var t=wp.data.select("core").getEntityRecords("taxonomy",j.autoicons.key,{per_page:-1,_fields:"id,name,slug"});return t?t.map((function(e){return{value:e.slug,label:e.name}})):[]}),[j.autoicons.key]);return m(a.Option,{title:__("Automatic icons")},m(a.Select,{help:{text:__('For custom taxonomies, be sure to set "Show in REST API"')},value:j.autoicons?j.autoicons.key:null,options:e,onChange:function(e){var t=j.autoicons?s({},j.autoicons):[];t.key=e,t.values=[],I({autoicons:t})},placeholder:""}),m(a.MappGrid,{cols:[{id:"key",label:__("Key"),type:"select",options:t},{id:"value",label:__("Icon"),type:"icon"}],data:j.autoicons.values,onChange:function(e){var t=j.autoicons?s({},j.autoicons):[];t.values=e,I({autoicons:t})}}))}()),m(a.Section,{title:__("Clustering")},m(a.Checkbox,{title:__("Clustering"),checked:j.clustering,label:__("Enable marker clustering"),onChange:function(e){return I({clustering:e})}}),function(){var e=j.clusteringOptions?j.clusteringOptions:{},t=function(t,n){e[t]=n,I({clusteringOptions:e})};if("google"==j.engine){return m("div",{className:"mapp-option-clustering-options"},m(a.Select,{help:{href:"https://github.com/googlemaps/v3-utility-library/blob/3fca406/packages/markerclustererplus/src/markerclusterer.ts"},label:m(h,null,__("Disable clustering at zoom"),m("code",null,"maxZoom")),onChange:function(e){return t("maxZoom",e)},options:_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],(function(e){return{value:e,label:e}})),placeholder:__("None"),title:__("Max zoom"),value:e.maxZoom}))}var n="https://github.com/Leaflet/Leaflet.markercluster#all-options";return m("div",{className:"mapp-option-clustering-options"},m(a.Select,{help:{href:n},label:m(h,null,__("Disable clustering at zoom"),m("code",null,"disableClusteringAtZoom")),onChange:function(e){return t("disableClusteringAtZoom",e)},options:_.map([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],(function(e){return{value:e,label:e}})),placeholder:__("Auto"),title:__("Max zoom"),value:e.disableClusteringAtZoom}),m(a.Checkbox,{checked:e.spiderfyOnMaxZoom,help:{href:n},label:m(h,null,__("Spiderfy"),m("code",null,"spiderfyOnMaxZoom")),onChange:function(e){return t("spiderfyOnMaxZoom",e)},title:__("Spiderfy")}))}()),mappl10n.options.pro&&m(a.Section,{title:__("Mashups")},m(a.Option,{title:__("Filters")},m(a.MappGrid,{cols:[{id:"key",label:__("Taxonomy"),onRender:function(e){var t=E(j.helpers.taxonomies).map((function(t){return t.disabled=t.value!=e.value&&_.findWhere(j.filters,{key:t.value}),t}));return m(a.Select,{value:e.value,options:t,onChange:e.onChange,placeholder:""})}},{id:"sort",label:__("Sort"),onRender:function(e){return m(a.Select,{value:e.value,options:[{value:"name",label:__("Name")},{value:"slug",label:__("Slug")}],onChange:e.onChange})}},{id:"count",label:__("Show counts"),onRender:function(e){return m(a.Checkbox,{checked:e.value,onChange:e.onChange})}}],data:j.filters,onChange:function(e){I({filters:e})}})),function(){var e=[{value:"poi",label:__("Open popup")},{value:"post",label:__("Open post")},{value:"postnew",label:__("Post in new tab")},{value:"postmodal",label:__("Post in modal")}];return m(a.Radios,{title:__("Marker click"),checked:j.mashupClick,options:e,onChange:function(e){return I({mashupClick:e})}})}(),m(a.Radios,{title:__("Popup content"),checked:j.mashupBody,options:[{value:"poi",label:__("POI title + POI body")},{value:"post",label:__("Post title + post excerpt")}],onChange:function(e){return I({mashupBody:e})}}),m(a.Checkbox,{title:__("KMLs"),checked:j.mashupKml,label:__("Include KML POIs in mashups"),onChange:function(e){return I({mashupKml:e})}})),mappl10n.options.pro&&m(a.Section,{title:__("Mashup Search")},m(a.Checkbox,{title:__("Search"),checked:j.search,label:__("Enable search"),onChange:function(e){return I({search:e})}}),m(a.Select,{help:{href:"https://mappresspro.com/mappress-documentation/#toc-mashup-search"},title:__("Search radius"),label:__("Minimum search radius (km)"),value:j.radius,options:_.map([1,5,10,15,25,50,75,100,200,300],(function(e){return{value:e,label:e}})),onChange:function(e){return I({radius:e})}}),m(a.Select,{title:__("Search country"),label:__("Country code for searches"),value:j.country,options:_.map(["","AF","AX","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","VG","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CK","CR","HR","CU","CW","CY","CZ","CD","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","CI","JM","JP","JE","JO","KZ","KE","KI","XK","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","AN","NC","NZ","NI","NE","NG","NU","NF","KP","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","CG","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","KR","SS","ES","LK","SD","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","VI","UG","UA","AE","GB","US","UM","UY","UZ","VU","VA","VE","VN","WF","EH","YE","ZM","ZW"],(function(e){return{value:e,label:e}})),onChange:function(e){return I({country:e})},help:{href:"https://en.wikipedia.org/wiki/ISO_3166-1#Officially_assigned_code_elements"}}),mappl10n.options.ssl?m(a.Checkbox,{title:__("User location"),checked:j.userLocation,label:__("Show user location on map"),onChange:function(e){return I({userLocation:e})}}):null,function(){if("google"!=j.engine)return m(a.Input,{onChange:function(e){return I({searchBox:e})},help:{href:"https://mappresspro.com/mappress-documentation/#toc-mashup-search"},label:__("Restrict searches to a bounding box (optional)"),title:__("Bounding box"),placeholder:"SW lon, SW lat, NE lng, NE lat",size:45,trim:!0,value:j.searchBox})}()),mappl10n.options.pro&&m(a.Section,{title:__("Geocoding")},m(a.Checkboxes,{title:__("Post types"),values:j.postTypes,options:E(j.helpers.post_types),onChange:function(e){return I({postTypes:e})}}),m(a.Option,{title:__("Geocoding fields")},m(a.MappGrid,{cols:[{id:"key",label:__("Map field"),type:"select",options:E(j.helpers.meta_fields)},{id:"value",label:__("Custom field"),type:"select",options:E(j.helpers.meta_keys)}],data:j.metaKeys,onChange:function(e){I({metaKeys:e})}})),m(a.Checkbox,{title:__("Overwrite"),label:__("Overwrite maps when posts are saved"),checked:j.metaSyncSave,onChange:function(e){I({metaSyncSave:e})}}),"google"==j.engine&&m(a.Input,{title:__("Google Server API key"),name:"apiKeyServer",value:j.apiKeyServer,onChange:function(e){return I({apiKeyServer:e})},size:50,help:{text:__("Server API key for geocoding.  Only required if client key is restricted by referrer."),href:"https://mappresspro.com/mappress-documentation/#toc-google-api-keys"}}),(n=__("No errors found"),j.helpers.geocoding_errors&&j.helpers.geocoding_errors.length>0&&(n=_.map(j.helpers.geocoding_errors,(function(e){return m("div",{key:e.ID},m("a",{href:mappl10n.options.editurl+"?post="+e.ID+"&action=edit"},e.post_title),m("span",null," : "+e.error))}))),m(a.Option,{title:__("Geocoding errors")},n))),mappl10n.options.pro&&mappl10n.options.acfActive&&m(a.Section,{title:__("Frontend Forms")},m(a.Option,{title:__("Advanced Custom Fields")},m(a.Input,{className:"mapp-option-acf",name:"acf",value:j.acf,onChange:function(e){I({acf:e})},placeholder:__("ACF field"),size:20}),__("ACF map field to include on MapPress mashups"),m(a.Help,{text:__("To generate MapPress maps from ACF fields, leave this blank and use the Geocoding section"),href:"https://mappresspro.com/mappress-documentation/#toc-frontend-forms"}))),mappl10n.options.pro&&m(a.Section,{title:__("Templates")},m(a.Option,{title:__("Custom templates")},m(a.MappTemplateEditor)),m(a.Option,{title:__("Mashup thumbnails")},m(a.Select,{label:__("Popups"),onChange:function(e){return I({thumbsPopup:e})},options:[{value:"",label:__("None")},{value:"top",label:__("Top")},{value:"left",label:__("Left")},{value:"right",label:__("Right")}],value:j.thumbsPopup}),m(a.Select,{label:__("POI lists"),onChange:function(e){return I({thumbsList:e})},options:[{value:"",label:__("None")},{value:"top",label:__("Top")},{value:"left",label:__("Left")},{value:"right",label:__("Right")}],value:j.thumbsList})),m(a.Option,{title:__("Thumbnail size")},m(a.Select,{onChange:function(e){return I({thumbSize:e})},options:E(j.helpers.thumbnail_sizes),value:j.thumbSize}),m("span",null," "+__("or")+" "),m(a.Input,{value:j.thumbWidth,onChange:function(e){return I({thumbWidth:e})},type:"number",min:0,max:9999}),m("span",null," X "),m(a.Input,{value:j.thumbHeight,onChange:function(e){return I({thumbHeight:e})},type:"number",min:0,max:9999}),m("span",null," (px) "))),m(a.Section,{title:__("Localization")},(t="leaflet"==j.engine?"https://en.wikipedia.org/wiki/ISO_639-1":"http://code.google.com/apis/maps/faq.html#languagesupport",m(a.Select,{title:__("Language"),label:__("Language for searches and Google map controls"),value:j.language,options:E(j.helpers.languages),onChange:function(e){return I({language:e})},help:{href:t}})),m(a.Input,{title:__("Directions server"),value:j.directionsServer,onChange:function(e){return I({directionsServer:e})},size:25})),m(a.Section,{title:__("Miscellaneous")},m(a.Option,{title:__("Map sizes")},m(a.MappGrid,{cols:[{id:"width",label:__("Width")+" (px, %, vw)",size:4},{id:"height",label:__("Height")+" (px, %, vh)"}],data:j.sizes,onChange:function(e,t){return I({sizes:e,size:t})},selectionColumn:"rowid",selected:j.size})),j.helpers.jetpack?null:m(a.Checkbox,{title:__("Scripts"),checked:j.footer,label:__("Output scripts in footer"),onChange:function(e){return I({footer:e})},help:{text:__("Disable footer scripts if maps are output using AJAX")}}),m(a.Checkbox,{title:"WPML",checked:j.wpml,label:__("Copy maps when overwriting a translation"),onChange:function(e){return I({wpml:e})},help:{href:"https://mappresspro.com/mappress-documentation#wpml"}}),m(a.Option,{title:__("Compatibility")},m("div",null,m(a.Checkbox,{checked:j.deregister,label:__("Prevent loading Google Maps multiple times"),onChange:function(e){return I({deregister:e})}})),m("div",null,m(a.Checkbox,{checked:j.iframes,label:__("Output maps in iframes to prevent compatibility issues"),onChange:function(e){return I({iframes:e})}})))),m("div",{className:"mapp-options-toolbar"},m(k,{isBusy:j.isSaving,className:"mapp-options-save",type:"submit",isPrimary:!0},__("Save")),m(k,{isBusy:j.isSaving,isSecondary:!0,onClick:function(){return D("reset")}},__("Reset Defaults")))))}document.getElementById("mapp-options-settings")&&wp.element.render(m(S,mappress_options_state),document.getElementById("mapp-options-settings"))},824:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Checkbox:()=>S,Checkboxes:()=>C,Help:()=>x,Input:()=>P,Radios:()=>N,Select:()=>M,Textarea:()=>I,Section:()=>E,Option:()=>A,MappGrid:()=>D,MappTemplateEditor:()=>z});var a=n(143);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=wp.element.createElement,m=wp.element,f=m.Fragment,h=m.useEffect,g=(m.useLayoutEffect,m.useCallback),b=(m.useRef,m.useState),y=(wp.data.useSelect,wp.components),v=y.Button,w=(y.ColorPicker,y.Dashicon),k=(y.Dropdown,y.ExternalLink,y.Modal),O=(y.Panel,y.PanelBody,y.PanelRow,y.Popover,y.RadioControl,y.Spinner,y.TabPanel),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function S(e){var t=e.checked,n=e.title,a=e.label,r=e.onChange,o=e.help,i=u(e,["checked","title","label","onChange","help"]),l=d(f,null,d("label",null,d("input",c({type:"checkbox",onChange:function(e){r&&r(e.target.checked)},checked:void 0!==t&&t},i)),a&&d("span",{className:"mapp-option-label"},a)),o&&d(x,o));return n?d(A,{title:n},l):l}function C(e){var t=d(f,null,_.map(e.options,(function(t,n){var a=e.values?e.values.indexOf(t.value):-1;return d(S,{key:n,label:t.label,value:t.value,checked:a>=0,onChange:function(n){var r=o(e.values);n&&-1==a&&e.onChange(r.concat(t.value)),!n&&a>=0&&(r.splice(a,1),e.onChange(r))}})})),e.help&&d(x,e.help));return e.title?d(A,{title:e.title},t):t}function x(e){var t="mapp-help-text";e.type&&(t+=" mapp-help-"+e.type);var n=null;return e.href&&(n="#"==e.href.substr(0,1)?"https://mappresspro.com/mappress-documentation/"+e.href:e.href),d(f,null,n&&d("a",{className:"mapp-help-link",href:n,target:"_blank"},d(w,{icon:"editor-help"})),e.text&&d("div",{className:t},e.text))}function P(e){var t=e.title,n=e.value,a=e.label,r=e.onChange,o=e.help,i=e.trim,l=e.type,s=u(e,["title","value","label","onChange","help","trim","type"]);if(!r)return"Missing onChange handler in Input component";i=void 0===i||i;var p=d(f,null,d("input",c({value:null!==n?n:"",onChange:function(e){return r(i?e.target.value.trim():e.target.value)},type:l||"text"},s)),a&&d("span",{className:"mapp-option-label"},a),o&&d(x,o));return t?d(A,{title:t},p):p}var j=function(e){var t=e.onChange,n=e.label,a=u(e,["onChange","label"]);return d("label",null,d("input",c({type:"radio",onChange:function(e){return t(e.target.value)}},a)),n&&d("span",{className:"mapp-option-label"},n))};function N(e){var t=d(f,null,_.map(e.options,(function(t,n){return d(j,{key:n,value:t.value,checked:e.checked==t.value||null==e.checked&&""==t.value,onChange:function(t){return e.onChange(t)},disabled:t.disabled,label:t.label})})),e.help&&d(x,e.help));return e.title?d(A,{title:e.title},t):t}function M(e){var t=e.title,n=e.value,a=e.label,r=e.onChange,i=e.options,l=e.help,s=e.placeholder,p=u(e,["title","value","label","onChange","options","help","placeholder"]),m=o(i);void 0!==s&&m.unshift({value:"",label:s});var h=d(f,null,d("select",c({value:null!=n?n:"",onChange:function(e){return r(e.target.value)}},p),_.map(m,(function(e,t){return d("option",{key:t,value:e.value,disabled:e.disabled},e.label)}))),a&&d("span",{className:"mapp-option-label"},a),l&&d(x,l));return t?d(A,{title:t},h):h}function I(e){var t=e.title,n=e.onChange,a=e.label,r=e.help,o=u(e,["title","onChange","label","help"]),i=d(f,null,d("textarea",c({onChange:function(e){return n(e.target.value)}},o)),a&&d("span",{className:"mapp-option-label"},a),r&&d(x,r));return t?d(A,{title:t},i):i}function E(e){var t=e.className?" "+e.className:"";return d("div",{className:"mapp-option-section"+t},d("h2",null,e.title),e.children)}function A(e){var t=e.className?"mapp-option "+e.className:"mapp-option";return d("div",{className:t},d("div",{className:"mapp-option-title"},e.title),d("div",{className:"mapp-option-value"},e.children))}function D(e){var t,n,i=r(b({dragging:null,dragover:null}),2),l=i[0],s=i[1];function p(e){s((function(t){return c(c({},t),e)}))}function u(t,n){var a=o(e.data);switch(t){case"add":var r={};_.map(e.cols,(function(e){r[e.id]=""})),a.push(r),e.onChange(a,e.selected);break;case"change":a[n.i][n.id]=n.value,e.onChange(a,e.selected);break;case"delete":var i;a.splice(n,1),i=n==e.selected?null:n<e.selected?e.selected-1:e.selected,e.onChange(a,i);break;case"select":p({selected:n}),e.onChange(a,n);break;case"sort":var s=l.dragging,c=s<c?n-1:n;a.splice(c,0,a.splice(s,1)[0]),e.onChange(a,c),p({dragover:null})}}return h((function(){}),[]),d("div",{className:e.className?"mapp-grid "+e.className:"mapp-grid"},e.data&&!!e.data.length&&d("div",{className:"mapp-grid-table"},(t=e.selectionColumn?d("div",{className:"mapp-grid-cell",key:"select"},__("Default")):null,n=d("div",{className:"mapp-grid-cell",key:"actions"},""),d("div",{className:"mapp-grid-header"},d("div",{className:"mapp-grid-row"},t,_.map(e.cols,(function(e){return d("div",{className:"mapp-grid-cell",key:e.id},e.label)})),n))),d("div",{className:"mapp-grid-body"},_.map(e.data,(function(t,n){return function(t,n){return d("div",{className:"mapp-grid-row"+(l.dragover==n?" mapp-dragover":""),draggable:!0,key:n,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){return p({dragging:n})},onDragEnter:function(e){return p({dragover:n})},onDragEnd:function(e){return p({dragging:null,dragover:null})},onDrop:function(e){return u("sort",n)}},function(t,n){if(!e.selectionColumn)return null;var a,r;switch("rowid"==e.selectionColumn?a=n:t[e.selectionColumn]?a=t[e.selectionColumn]:r=!0,e.selectionType){case"checkbox":return d("div",{className:"mapp-grid-cell"},d(S,{value:a,checked:e.selected==a,disabled:r,onChange:function(e){u("select",e?a:null)}}));case"radio":default:return d("div",{className:"mapp-grid-cell"},d(j,{checked:e.selected==a,onChange:function(){return u("select",a)}}))}}(t,n),_.map(e.cols,(function(t,r){return d("div",{className:"mapp-grid-cell mapp-grid-cell-"+t.id,key:n+"-"+r},function(t,n){if(n.onRender)return n.onRender({id:n.id,value:e.data[t][n.id],onChange:function(e){return u("change",{i:t,id:n.id,value:e})}});switch(n.type){case"icon":return d(a.MappIconPicker,{iconid:e.data[t][n.id],onChange:function(e){return u("change",{i:t,id:n.id,value:e})}});case"input":default:return d(P,{size:e.data[t][n.size],value:e.data[t][n.id],onChange:function(e){return u("change",{i:t,id:n.id,value:e})}});case"select":return d(M,{value:e.data[t][n.id],options:n.options,onChange:function(e){u("change",{i:t,id:n.id,value:e})},placeholder:""})}}(n,t))})),function(e){return d("div",{className:"mapp-grid-cell",key:"delete"},d(v,{icon:"trash",onClick:function(){return u("delete",e)}}))}(n))}(t,n)})))),d("div",{className:"mapp-grid-toolbar"},d(v,{isSecondary:!0,onClick:function(){return u("add")}},__("Add"))))}function z(e){var t=r(b({codeEditor:null,isOpen:!1,name:null,tab:"editor",template:null,tokens:null}),2),n=t[0],a=t[1];function o(e){a((function(t){return c(c({},t),e)}))}var i,l,s=g((function(e){if(null!=e){var t=wp.codeEditor.initialize(e);t.codemirror.setSize("auto","auto"),t.codemirror.setOption("readOnly","editor"!=n.tab),o({codeEditor:t})}}),[]);function p(e,t){switch(e){case"close":o({isOpen:!1});break;case"delete":confirm(mappl10n.delete_prompt)&&(mapp.lib.ajax({type:"POST",data:{action:"mapp_tpl_delete",name:n.template.name,nonce:mappl10n.options.nonce}}),o({isOpen:!1}));break;case"insert":var a=n.codeEditor.codemirror.getDoc(),r=a.getCursor();a.replaceRange("{{{poi."+t+"}}}",r);break;case"open":mapp.lib.ajax({type:"GET",data:{action:"mapp_tpl_get",name:t,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status&&o({isOpen:!0,name:t,tab:"editor",template:e.data.template,tokens:e.data.tokens})}});break;case"save":var i="editor"==n.tab?n.codeEditor.codemirror.getValue():n.template.content;mapp.lib.ajax({type:"POST",data:{action:"mapp_tpl_save",content:i,name:n.template.name,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status&&o({isOpen:!1,template:null,tokens:null})}});break;case"tab-select":if("editor"!=t){var l=c({},n.template);l.content=n.codeEditor.codemirror.getValue(),o({template:l})}o({tab:t})}}return d("div",{className:"mapp-templates"},(l=[{name:"map-popup",label:__("Map popup")},{name:"map-item",label:__("Map list item")},{name:"mashup-popup",label:__("Mashup popup")},{name:"mashup-item",label:__("Mashup list item")}],d("div",{className:"mapp-templates-list"},_.map(l,(function(e,t){return d("a",{href:"#",key:e.name,className:"mapp-templates-item",onClick:function(t){t.preventDefault(),p("open",e.name)}},e.label)})))),n.isOpen&&n.template?d(k,{title:(i=n.template.name+" ("+(n.template.exists?__("Custom"):__("New"))+")",d("div",{className:"mapp-templates-name"},i)),className:"mapp-templates-modal",onRequestClose:function(){return p("close")},shouldCloseOnClickOutside:!1},d(O,{className:"mapp-templates-tabs",onSelect:function(e){return p("tab-select",e)},tabs:[{name:"editor",title:__("Editor")},{name:"standard",title:__("Default")}]},(function(e){return t=d("div",{className:"mapp-templates-tokens"},_.map(n.tokens,(function(e,t){return d("code",{onClick:function(){return p("insert",e)},key:t,title:e},e)}))),a=d("div",{className:"mapp-templates-path"},n.template.path),d(f,null,"editor"==n.tab&&a,"editor"==n.tab&&t,d("div",{className:"editor"==n.tab?"mapp-templates-editor":"mapp-templates-standard"},d("textarea",{ref:s,defaultValue:"editor"==n.tab?n.template.content:n.template.standard})));var t,a})),d("div",{className:"mapp-templates-toolbar"},d(v,{isPrimary:!0,onClick:function(){return p("save")}},__("Save")),d(v,{isSecondary:!0,onClick:function(){return p("close")}},__("Cancel")),n.template.exists&&d("a",{onClick:function(e){e.preventDefault(),p("delete")}},__("Delete")))):null)}},149:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});var a=wp.element.createElement,r=(wp.data.select,wp.element),o=(r.Fragment,r.useEffect,r.useLayoutEffect,r.useRef,r.useState,wp.components),i=(o.BaseControl,o.Button),sprintf=(o.Dashicon,o.Modal,o.PanelBody,o.RadioControl,o.Spinner,o.TextControl,wp.i18n.sprintf);function l(e){function t(t,n){var a=Math.ceil(e.count/e.pageSize);switch(t){case"first":e.onChange(1);break;case"last":e.onChange(a);break;case"next":e.onChange(e.page+1);break;case"prev":e.onChange(e.page-1)}}return r=Math.ceil(e.count/e.pageSize),o=e.page<=1,l=e.page>=r,a("div",{className:"mapp-paginate"},a(i,{disabled:o,onClick:function(){return t("first")},isSecondary:!0},"«"),a(i,{disabled:o,onClick:function(){return t("prev")},isSecondary:!0},"‹"),a("div",{className:"mapp-paginate-count"},sprintf((n="%d of %d",wp.i18n.__(n,"mappress-google-maps-for-wordpress")),e.page,r)),a(i,{disabled:l,onClick:function(){return t("next")},isSecondary:!0},"›"),a(i,{disabled:l,onClick:function(){return t("last")},isSecondary:!0},"»"));var n,r,o,l}},694:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var a=n(713),r=n(999),o=n(149);function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m=wp.element,f=m.useEffect,h=m.useState,g=(React.createContext,wp.element.createElement);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=window.mapp||{},S=wp.element.createElement,C=wp.data.select,x=wp.element,P=(x.Fragment,x.useEffect),j=(x.useLayoutEffect,x.useRef),N=x.useState,M=wp.components,I=(M.BaseControl,M.Button),E=M.Dashicon,A=M.Icon,D=M.Modal,z=(M.PanelBody,M.RadioControl,M.Spinner),T=M.TextControl,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function L(e){var t=w(N({counts:{all:null,trashed:null,post:null},filter:"all",isFetchingItems:!0,items:null,mode:e.mode?e.mode:"list",mapid:e.mapid?e.mapid:null,page:1,search:""}),2),n=t[0],l=t[1],c=function(){var e=p(h({snackbars:[]}),2),t=e[0],n=e[1];function a(e){n((function(t){return s(s({},t),e)}))}return f((function(){if(t.snackbars.length){var e=setTimeout((function(){var e=i(t.snackbars);e.shift(),a({snackbars:e})}),5e3);return function(){return clearTimeout(e)}}}),[t.snackbars]),{addSnackbar:function(e){return a({snackbars:[].concat(i(t.snackbars),[e])})},renderSnackbar:function(){return g("div",{className:"mapp-snackbars"},t.snackbars.map((function(e,t){return g("div",{className:"mapp-snackbar mapp-snackbar-show",key:t},e)})))}}}(),u=c.addSnackbar,d=c.renderSnackbar,m=j(null),b=j(null),v=j(null);function k(e){l((function(t){return y(y({},t),e)}))}function x(t,a){switch(t){case"attach":O.store.mutateMap(a.mapid,a.mapdata);break;case"add-new":k({mode:"edit",mapid:null});break;case"close":e.onAction("pick-close");break;case"destroy":confirm(mappl10n.delete_map_prompt)&&(O.store.destroyMap(a),u(__("Map deleted"))),b.current&&b.current.focus();break;case"detach":O.store.mutateMap(a,{postid:0});break;case"duplicate":O.store.duplicateMap({mapid:a,success:function(e){u(__("Map copied")),k({mapid:e.mapid}),m.current&&(m.current.scrollTop=0)}});break;case"edit":if("trash"==n.filter)return;k({mode:"edit",mapid:a});break;case"edit-close":"edit"==e.mode?e.onAction("pick-close"):k({mode:"list"});break;case"edit-save":"edit"==e.mode?e.onAction("pick-close",a):(k({mode:"list",mapid:a}),u(__("Map saved")));break;case"filter":k({filter:a});break;case"insert":e.onAction("pick-insert",a);break;case"page":k({page:a}),m.current&&(m.current.scrollTop=0);break;case"restore":O.store.mutateMap(a,{status:"",postid:0}),u(__("Map restored"));break;case"shortcode":var r=jQuery("<input>");jQuery("body").append(r),r.val('[mappress mapid="'+a+'"]').select(),document.execCommand("copy"),r.remove(),u(__("Shortcode copied"));break;case"sort":O.store.setSort({sortBy:a,sortAsc:O.store.state.sortBy!=a||!O.store.state.sortAsc});break;case"trash":case"edit-trash":O.store.mutateMap(a,{status:"trashed"}),u(__("Map moved to trash")),n.mapid&&a==n.mapid&&e.onAction("pick-trash",a)}}function M(t){var r,o=t.mapid==n.mapid;r=t.map_title?t.map_title:__("Untitled");var i,l=function(t){var n;return n=(n="map"==e.context||"mashup"==e.context&&t.postid==mappl10n.options.postid?C("core/editor").getEditedPostAttribute("title"):t.post_title)||__("Untitled"),t.postid>0&&t.postid==mappl10n.options.postid&&(n=__("Current post")),t.postid>0?t.postid==mappl10n.options.postid?n:S("a",{href:mappl10n.options.editurl+"?post="+t.postid+"&action=edit",target:"_blank",title:__("Edit post")},n):__("Unattached")}(t);i="trash"==n.filter?[{action:"restore",label:__("Restore")},{action:"destroy",label:__("Delete Permanently"),isDestructive:!0}]:[{action:"edit",label:__("Edit")},{action:"insert",label:__("Insert into post"),hide:"library"==e.context},{action:"duplicate",label:__("Copy")},{action:"trash",label:__("Trash")}],i=S("div",{className:"mapp-pick-actions"},i.map((function(e){return!e.hide&&S("a",{className:e.isDestructive?"mapp-destructive":"",href:"#",key:e.action,onClick:function(n){n.stopPropagation(),n.preventDefault(),x(e.action,t.mapid)}},e.label)})));var s=null;return s=t.postid>0?S("a",{href:"#",onClick:function(){return x("detach",t.mapid)}},__("Detach")):"library"==e.context?S(a.default,{onChange:function(e,n){return x("attach",{mapid:t.mapid,mapdata:{postid:e,post_title:n}})}},__("Attach")):S("a",{href:"#",onClick:function(){return x("attach",{mapid:t.mapid,mapdata:{postid:mappl10n.options.postid,post_title:null}})}},__("Attach")),S("div",{className:"mapp-pick-item"+(o?" mapp-selected":""),key:t.mapid+"|"+t.postid,ref:o?v:null},S("div",{className:"mapp-pick-col-mapid",onClick:function(e){return x("edit",t.mapid)}},t.mapid),S("div",{className:"mapp-pick-col-map_title",onClick:function(e){return x("edit",t.mapid)}},S("div",null,r),S("div",null,i)),S("div",{className:"mapp-pick-col-post_title"},l,S("div",null,s)),"library"==e.context&&S("div",{className:"mapp-pick-col-shortcode"},S(I,{isSmall:!0,isSecondary:!0,onClick:function(e){e.stopPropagation(),e.preventDefault(),x("shortcode",t.mapid)}},__("Copy"))))}P((function(){var e=function(e){if(!e.isFetchingItems){var t={all:0,post:0,trash:0};_.map(e.items,(function(e){"trashed"==e.status?t.trash++:(t.all++,e.postid==mappl10n.options.postid&&t.post++)})),k({counts:t})}k({isFetchingItems:e.isFetchingItems,isSavingMap:e.isSavingMap,items:e.items})};return O.store.subscribe(e),function(){return O.store.unsubscribe(e)}})),P((function(){b.current&&b.current.focus(),O.store.fetchItems()}),[]),P((function(){k({page:1})}),[n.filter,n.search]);var L,B=_.filter(n.items,(function(t){if("trash"==n.filter)return"trashed"==t.status;if("trashed"==t.status)return!1;if("post"==n.filter&&t.postid!=mappl10n.options.postid)return!1;if("current"==n.filter&&t.mapid!=e.mapid)return!1;var a=n.search.toLowerCase();return!a||(t.mapid.indexOf(a)>=0||(!!(t.post_title&&t.post_title.toLowerCase().indexOf(a)>=0)||!!(t.map_title&&t.map_title.toLowerCase().indexOf(a)>=0)))})),F=S("div",{className:"mapp-list-panel"},S("div",{className:"mapp-gt-modal-header"},S("div",{className:"mapp-gt-modal-header-title"},S("h1",null,__("Maps")),S(I,{isPrimary:!0,onClick:function(){return x("add-new")}},__("Add New"))),S(I,{onClick:function(){return x("close")},icon:"no-alt"})),(L=[{label:__("All"),value:"all"},{label:__("Attached to post"),value:"post",hide:"library"==e.context},{label:__("Selected"),value:"current",hide:"library"==e.context||!e.mapid},{label:__("Trash"),value:"trash"}],S("div",{className:"mapp-pick-filter-wrapper"},S("div",{className:"mapp-pick-filter-tabs"},_.map(L,(function(e,t){var a="mapp-pick-filter-tab"+(n.filter==e.value?" mapp-active":""),r="current"!=e.value?n.counts[e.value]:null;if(!e.hide)return S("div",{className:a,href:"#",key:t,onClick:function(){return x("filter",e.value)}},e.label,null!=r&&S("span",{className:"mapp-pick-filter-count"},r))}))),function(){if("trash"!=n.filter)return S("div",{className:"mapp-pick-search-wrapper"},S(T,{ref:b,className:"mapp-pick-search",tabIndex:1,placeholder:__("post title, map title, or map id"),onChange:function(e){return k({search:e})},size:50,value:n.search}),S(A,{icon:"search"}),(n.isFetchingItems||n.isAttaching&&"library"!=e.context)&&S(z,null))}())),function(t){if(t){var a=20*(n.page-1),r=a+20;t=t.slice(a,r)}var o="";return o=n.isFetchingItems?null:t.length?_.map(t,M):S("div",{className:"mapp-pick-message"},__("No maps found")),S("div",{className:"mapp-pick-items-section"},S("div",{className:"mapp-pick-items",ref:m},function(){var t=[{id:"mapid",label:__("ID"),sortable:!0},{id:"map_title",label:__("Map title"),sortable:!0},{id:"post_title",label:__("Attached to"),sortable:!0}];"library"==e.context&&t.push({id:"shortcode",label:__("Shortcode"),sortable:!1});return S("div",{className:"mapp-pick-items-header"},_.map(t,(function(e){return S("div",{className:"mapp-pick-col-"+e.id,onClick:function(){return x("sort",e.id)},key:e.id},e.label,e.sortable&&O.store.state.sortBy==e.id&&S(E,{icon:O.store.state.sortAsc?"arrow-up":"arrow-down"}),e.sortable&&O.store.state.sortBy!=e.id&&S(E,{icon:"leftright"}))})))}(),o))}(B),function(e){return S("div",{className:"mapp-pick-toolbar"},function(e){return e&&e.length?S(o.S,{count:e?e.length:0,onChange:function(e){return x("page",e)},page:n.page,pageSize:20}):null}(e))}(B)),R=null;if("edit"==n.mode){var U=S("div",{className:"mapp-edit-panel"},S(r.default,{context:e.context,mapid:n.mapid,onAction:x}));R="library"==e.context?S(D,{className:"mapp-gt-modal",isDismissible:!1},U):U}var G="mapp-pick mapp-mode-"+n.mode+" mapp-context-"+e.context;return"library"==e.context?S("div",{className:G},F,R,d()):S(D,{className:"mapp-gt-modal "+G,isDismissible:"list"==n.mode,onRequestClose:function(){return x("close")},shouldCloseOnEsc:"list"==n.mode,shouldCloseOnClickOutside:"list"==n.mode},F,R,d())}var B=document.getElementById("mapp-library");B&&(mappl10n.options.postid=0,wp.element.render(S(L,{context:"library"}),B))},429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappSettings:()=>b});var a=n(710);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}window.mapp;var i=wp.element.createElement,l=wp.element,s=l.Fragment,c=(l.useEffect,l.useLayoutEffect,l.useRef,l.useState),p=wp.components,u=p.BaseControl,d=p.Button,m=p.ButtonGroup,f=(p.Dashicon,p.Dropdown,p.Panel,p.PanelBody),_=p.PanelRow,h=(p.RadioControl,p.SelectControl),g=p.TextControl,__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function b(e){var t,n=r(c({}),2);n[0],n[1];function o(e){if(!e||"string"!=typeof e)return e;var t={px:2048,vw:100,vh:100,"%":100},n=parseInt(e),a=2048,r="";for(var o in t)e.includes(o)&&(r=o,a=t[o]);return n>a?a+r:e}function l(t,n){var a=null;switch(t){case"poiList":e.map.set({poiList:n}),a={poiList:n};break;case"size":n.hasOwnProperty("height")&&(n.height=o(n.height)),n.hasOwnProperty("width")&&(n.width=o(n.width)),e.map.setSize(n),a=n;break;case"style-set-maptypeid":e.map&&e.map.set({mapTypeId:n}),a={mapTypeId:n};break;case"viewport-reset":e.map.center=e.map.zoom=null,e.map.recenter(),a={center:void 0,zoom:void 0};break;case"viewport-set":var r=e.map.getCenter().toJSON();e.map.center=r,e.map.zoom=e.map.getZoom(),a={center:r.lat+","+r.lng,zoom:e.map.getZoom()},"mce"==e.context||"library"==e.context?alert(__("Viewport set")):wp.data.dispatch("core/notices").createNotice("success",__("Viewport set"),{type:"snackbar",isDismissible:!0})}a&&e.onAction("change-settings",a)}return i("div",{className:"mapp-settings"},i(f,{title:__("Map settings")},(t=e.map.title?e.map.title:__("Untitled"),i(_,null,"map"==e.context&&i(u,{className:"mapp-settings-title"},t),i(u,{className:"mapp-settings-id",label:__("Map ID")},e.map.mapid))),function(){if("mashup"==e.context)return i(_,{className:"mapp-style-toggle"},__("Style"),i(a.m,{map:e.map,selected:e.map.mapTypeId,onChange:function(e){return l("style-set-maptypeid",e)}}))}(),function(){var t=mappl10n.options.sizes[mappl10n.options.size]?mappl10n.options.sizes[mappl10n.options.size]:mappl10n.options.sizes[0],n=mappl10n.options.sizes.map((function(e,t){return{label:e.width+" X "+e.height,height:e.height,width:e.width,value:t+1}}));n.unshift({height:"",label:__("Default"),value:0,width:""}),n.push({label:__("Custom"),value:"custom",disabled:!0});for(var a="custom",r=0;r<n.length-1;r++)n[r].width==e.width&&n[r].height==e.height&&(a=r);return i(s,null,i(h,{className:"mapp-settings-dims-select",help:"",label:__("Size"),value:a,options:n,onChange:function(e){return l("size",{width:n[e].width,height:n[e].height})}}),i(_,null,i(g,{className:"mapp-settings-dims-custom",help:__("px, %, vw"),label:__("Width"),onChange:function(e){return l("size",{width:e})},placeholder:t.width,value:e.width?e.width:""}),i(g,{className:"mapp-settings-dims-custom",help:__("px, %, vh"),label:__("Height"),onChange:function(e){return l("size",{height:e})},placeholder:t.height,value:e.height?e.height:""})))}(),(e.center&&(e.center.lat,e.center.lng,__("Zoom"),e.zoom),i(s,null,i(u,{className:"mapp-settings-viewport",label:__("Center/Zoom")},i(m,{label:__("Center/Zoom")},i(d,{onClick:function(){return l("viewport-reset")},isPressed:!e.center,isSmall:!0},__("Automatic")),i(d,{onClick:function(){return l("viewport-set")},isPressed:e.center,isSmall:!0},__("Set"))))))))}},787:()=>{function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o=window.mapp||{};o.Store=function(){this.subs=new Set,this.state={isFetchingMap:!1,isFetchingItems:!1,isSavingMap:!1,itemsFetched:!1,sortBy:"mapid",sortAsc:!1,maps:{},items:[]}},o.Store.prototype={createMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=void 0===t?function(){}:t;this.state.isFetchingMap=!1,this.publish(),n()},destroyMap:function(e){var t=this;o.lib.ajax({type:"POST",data:{action:"mapp_delete",mapid:e,nonce:mappl10n.options.nonce},callback:function(n){n&&"OK"==n.status&&(delete t.state.maps[e],t.destroyItem(e)),t.publish()}})},duplicateMap:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapid,a=t.success,r=void 0===a?function(){}:a,i=t.failure,l=void 0===i?function(){}:i;this.state.isSavingMap=!0,this.publish(),o.lib.ajax({type:"POST",data:{action:"mapp_duplicate",mapid:n,postid:mappl10n.options.postid,nonce:mappl10n.options.nonce},callback:function(t){if(t&&"OK"==t.status){var n=t.data,a=n.mapid;e.state.maps[a]=n,e.saveItem(a,n),r(n)}else l();e.state.isSavingMap=!1,e.publish()}})},fetchMap:function(e){var t=this,n=e.mapid,a=e.success,r=void 0===a?function(){}:a;e.failure;if(void 0!==this.state.maps[n])return this.publish(),void r(this.state.maps[n]);this.state.isFetchingMap=!0,this.publish(),o.lib.ajax({type:"GET",data:{action:"mapp_get",mapid:n,nonce:mappl10n.options.nonce},callback:function(e){e&&"OK"==e.status?(t.state.maps[n]=e.data,r(e.data)):t.state.maps[n]=null,t.state.isFetchingMap=!1,t.publish()}})},mutateMap:function(e,t){var n=this;this.state.isSavingMap=!0,this.saveItem(e,t),this.publish(),o.lib.ajax({type:"POST",data:{action:"mapp_mutate",mapid:e,mapdata:t,nonce:mappl10n.options.nonce},callback:function(e){n.state.isSavingMap=!1,n.publish()}})},saveMap:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapdata,a=t.success,r=void 0===a?function(){}:a,i=t.failure,l=void 0===i?function(){}:i;this.state.isSavingMap=!0,this.publish(),o.lib.ajax({type:"POST",data:{action:"mapp_save",mapdata:JSON.stringify(n),nonce:mappl10n.options.nonce},callback:function(t){t&&"OK"==t.status?(mapid=t.data,n.mapid=mapid,e.state.maps[mapid]=n,e.saveItem(mapid,n),r(n)):l(),e.state.isSavingMap=!1,e.publish()}})},destroyItem:function(e){var t=this.state.items?this.state.items:[],a=_.findIndex(t,{mapid:e});a>-1&&t.splice(a,1),this.state.items=n(t),this.publish()},fetchItems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.success,a=void 0===n?function(){}:n,r=t.failure,i=void 0===r?function(){}:r;if(this.state.itemsFetched)return a(this.state.items),void this.publish();this.state.isFetchingItems=!0,this.publish(),o.lib.ajax({type:"GET",data:{action:"mapp_find",nonce:mappl10n.options.nonce},callback:function(t){t&&"OK"==t.status?(e.state.items=t.data,e.sort(),a(e.state.items),e.state.itemsFetched=!0):i(),e.state.isFetchingItems=!1,e.sort(),e.publish()}})},saveItem:function(n,a){var r=this.state.items?this.state.items:[],o=_.findWhere(r,{mapid:n});o?(_.map(["mapid","title","postid","post_title","status"],(function(e){void 0!==a[e]&&(o[e]=a[e])})),o=function(n){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?e(Object(r),!0).forEach((function(e){t(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}({},o)):(o={mapid:n,map_title:a.title,postid:mappl10n.options.postid,post_title:null},r.unshift(o))},setSort:function(e){e.sortBy&&(this.state.sortBy=e.sortBy),void 0!==e.sortAsc&&(this.state.sortAsc=e.sortAsc),this.sort(),this.publish()},sort:function(e,t){var n,a=this,r=(n="untitled",wp.i18n.__(n,"mappress-google-maps-for-wordpress"));this.state.items.sort((function(e,t){return function(e,t,n,a){if(a=a?1:-1,"mapid"==n)return a*(Number(e.mapid)-Number(t.mapid));var o=e[n]?e[n]:r,i=t[n]?t[n]:r,l=a*o.localeCompare(i);return 0==l?Number(e.mapid)-Number(t.mapid):l}(e,t,a.state.sortBy,a.state.sortAsc)}))},subscribe:function(e){this.subs.add(e)},unsubscribe:function(e){this.subs.delete(e)},publish:function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(_e){throw _e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}(n(this.subs));try{for(t.s();!(e=t.n()).done;){(0,e.value)(this.state)}}catch(e){t.e(e)}finally{t.f()}}},o.store=new o.Store},710:(e,t,n)=>{"use strict";n.d(t,{m:()=>w});var a=n(824),r=n(149);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=wp.element.createElement,u=wp.element,d=u.Fragment,m=(u.useEffect,u.useLayoutEffect,u.useRef,u.useState),f=wp.components,h=f.Button,g=(f.Dashicon,f.ExternalLink),b=f.Icon,y=f.Modal,v=(f.Panel,f.PanelBody,f.PanelRow,f.Spinner),__=function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")};function w(e){var t,n,o,l,c,u,f,w=s(m({apiKey:"6a0cfe9e-3670-4598-a63e-f1627b5c9e56",snazzyPagination:null,snazzySearch:"",snazzyStyles:null,isOpen:!1,isSaving:!0,isSearching:!1,json:"",map:null,mapboxError:"",mapboxId:"",mapboxName:"",mapboxUser:"",mapboxUrl:"",mapboxParsedUrl:"",mode:"pick",page:1,style:mappl10n.options.style,standardStyles:mappl10n.options.standardStyles,userStyles:mappl10n.options.userStyles}),2),k=w[0],O=w[1];function S(e){O((function(t){return i(i({},t),e)}))}function C(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=_.findIndex(k.userStyles,{id:t.id});if(a>=0){if(!n&&!confirm(__("Style already exists, overwrite?")))return;mappl10n.options.userStyles[a]=t}else mappl10n.options.userStyles.push(t);S({isOpen:!1,mode:"pick",userStyles:mappl10n.options.userStyles,selected:t.id}),e.onChange(t.id),mapp.lib.ajax({type:"POST",data:{action:"mapp_option_save",settings:"leaflet"==mappl10n.options.engine?{stylesMapbox:mappl10n.options.userStyles}:{stylesGoogle:mappl10n.options.userStyles},nonce:mappl10n.options.nonce},callback:function(e){}})}function x(e){S({isSearching:!0,snazzyStyles:null}),mapp.lib.ajax({type:"GET",data:{sort:"popular",page:e,pageSize:20,text:k.snazzySearch,key:k.apiKey},url:"https://snazzymaps.com/explore.json",callback:function(e){(S({isSearching:!1,snazzyPagination:e&&e.pagination?e.pagination:null}),e&&e.styles)?S({snazzyStyles:_.map(e.styles,(function(e,t){return e.id=e.id+"",e}))}):alert("Error: unable to fetch styles")}})}function P(e,t){t="large"==t||"small"==t?t:"small",t=800;var n=mappl10n.options.baseurl+"/images/roadmap.png";return"leaflet"==mappl10n.options.engine?mappl10n.options.mapbox?e.user&&e.mapboxid&&(n="https://api.mapbox.com/styles/v1/"+e.user+"/"+e.mapboxid+"/static/-122.4194,37.7749,10,0/800x800?access_token="+mappl10n.options.mapbox):n=mappl10n.options.baseurl+"/images/osm.png":e.imageUrl&&(n=e.imageUrl),p("img",{src:n,title:e.name})}function j(t,n){switch(t){case"close":S({isOpen:!1});break;case"json-cancel":S({mode:"pick"});break;case"json-change":S({json:n});break;case"json-save":var a=_.findWhere(k.userStyles,{id:e.selected});a&&(a.json=JSON.stringify(JSON.parse(k.json)),C(a,!0));break;case"mapbox-cancel":S({mode:"pick"});break;case"mapbox-change-url":var r,o,i=n.trim().toLowerCase().replace(".html","").replace("https://api.mapbox.com/styles/v1/","").replace("mapbox://styles/","").split("?")[0].split("/");2==i.length&&(r=i[0],o=i[1]),S({mapboxUrl:n,mapboxUser:r,mapboxId:o});break;case"mapbox-save":k.mapboxName&&k.mapboxUser&&C({id:k.mapboxId,name:k.mapboxName,mapboxid:k.mapboxId,provider:"mapbox",url:k.mapboxUrl,user:k.mapboxUser});break;case"mode":S({mode:n});break;case"open":"leaflet"!=mappl10n.options.engine||mappl10n.options.mapbox?S({isOpen:!0}):alert(__("Please enter a Mapbox access token in the MapPress settings screen to use styled maps."));break;case"pick-add":alert(__("Please upgrade to MapPress Pro to use custom styles"));break;case"pick-cancel":S({isOpen:!1});break;case"pick-delete":confirm(mappl10n.delete_prompt)&&function(t){var n=_.findIndex(k.userStyles,{id:t});if(n<0)mapp.lib.alert("Invalid delete");else{var a=k.userStyles;a.splice(n,1),mappl10n.options.userStyles=a,S({userStyles:a}),e.selected==t&&e.onChange(null),mapp.lib.ajax({type:"POST",data:{action:"mapp_option_save",settings:"leaflet"==mappl10n.options.engine?{stylesMapbox:a}:{stylesGoogle:a},nonce:mappl10n.options.nonce},callback:function(e){}})}}(n);break;case"pick-edit":e.onChange(n.id),"leaflet"==mappl10n.options.engine?S({mode:"mapbox",mapboxId:n.mapboxid,mapboxName:n.name,mapboxUrl:n.url,mapboxUser:n.user}):S({json:n.json,mode:"json"});break;case"pick-select":e.onChange(n.id),S({isOpen:!1});break;case"snazzy-cancel":S({mode:"pick"});break;case"snazzy-save":var l=n;l&&C({id:l.id,imageUrl:l.imageUrl,json:l.json,name:l.name});break;case"snazzy-search":x()}}function N(e){var t;return t=e.styles&&e.styles.length?_.map(e.styles,(function(t,n){return function(e,t){var n="mapp-style"+(t.selected==e.id?" mapp-selected":""),a=t.onDelete?p(b,{icon:"trash",onClick:function(){return t.onDelete(e.id)}}):null,r=t.onEdit?p("a",{onClick:function(){return t.onEdit(e)}},__("Edit")):null;return p("div",{className:n,key:e.id},p("div",{className:"mapp-style-image",onClick:function(){return t.onSelect(e)}},P(e)),p("div",{className:"mapp-style-details"},p("div",{className:"mapp-style-title"},e.name),p("div",{className:"mapp-style-actions"},r,a)))}(t,e)})):k.isSearching?"":p("div",{className:"mapp-style-list-msg"},__("No results")),p("div",{className:"mapp-style-list-wrapper"},p("div",{className:"mapp-style-list-header"},e.title),p("div",{className:"mapp-style-list"},t))}return p(d,null,(c=k.standardStyles.concat(k.userStyles),u=!mappl10n.options.style||"roadmap"!=e.selected&&"streets"!=e.selected&&e.selected?e.selected:mappl10n.options.style,f=(f=_.findWhere(c,{id:u}))||k.standardStyles[0],p(h,{className:"mapp-style-toggle",icon:P(f),iconSize:75,isSecondary:!0,onClick:function(){return j("open",null)},title:f.name})),"edit"==k.mode&&k.isOpen&&renderEdit(),"json"==k.mode&&k.isOpen&&function(){var e,t,n;try{e=JSON.parse(k.json),t=JSON.stringify(e,null,2)}catch(e){n=e.toString(),t=k.json}var a=n?"mapp-style-json mapp-style-error":"mapp-style-json";return p(y,{title:__("Edit style JSON"),className:"mapp-style-modal",onRequestClose:function(){return j("json-cancel")},shouldCloseOnClickOutside:!0},p("div",{className:a},p("textarea",{value:t,spellCheck:!1,onChange:function(e){return j("json-change",e.target.value)}})),p("div",{className:"mapp-style-json-error"},n||""),p("div",{className:"mapp-style-toolbar"},p("div",null,p(h,{disabled:n,isPrimary:!0,onClick:function(){return j("json-save")}},__("Save")),p(h,{onClick:function(){return j("json-cancel")}},__("Cancel")))))}(),"mapbox"==k.mode&&k.isOpen&&(o=k.mapboxUser&&k.mapboxId?P({user:k.mapboxUser,mapboxid:k.mapboxId,name:k.mapboxName},"large"):null,l=!k.mapboxUser||!k.mapboxId||!k.mapboxName,p(y,{title:__("Add style"),className:"mapp-style-modal",onRequestClose:function(){return j("mapbox-cancel")},shouldCloseOnClickOutside:!0},p("div",{className:"mapp-style-mapbox-title"},__("Enter style from Mapbox Studio"),p(g,{href:"https://studio.mapbox.com"})),p("form",{className:"mapp-style-mapbox-form",onSubmit:function(e){e.stopPropagation(),e.preventDefault(),j("mapbox-save",k.snazzySelected)}},p("label",null,p("span",{className:"mapp-style-mapbox-label"},__("MapBox Share URL")),p(a.Help,{href:"#toc-mapbox-studio-styles"}),p(a.Input,{autoFocus:!0,className:"mapp-style-mapbox-url",value:k.mapboxUrl,onChange:function(e){return j("mapbox-change-url",e)}})),p("label",null,p("div",{className:"mapp-style-mapbox-label"},__("Style name")),p(a.Input,{className:"mapp-style-mapbox-name",value:k.mapboxName,onChange:function(e){return S({mapboxName:e})}})),p("div",{className:"mapp-style-mapbox-preview"},o),p("div",{className:"mapp-style-toolbar"},p("div",null,p(h,{isPrimary:!0,disabled:l,type:"submit"},__("Save")),p(h,{onClick:function(){return j("mapbox-cancel")}},__("Cancel"))))))),"pick"==k.mode&&k.isOpen&&(n="",k.userStyles&&k.userStyles.length&&(n=N({selected:e.selected,onEdit:function(e){return j("pick-edit",e)},onDelete:function(e){return j("pick-delete",e)},onSelect:function(e){return j("pick-select",e)},styles:k.userStyles,title:__("Custom styles")})),p(y,{title:p("div",{className:"mapp-style-header"},__("Select a style")),className:"mapp-style-modal",onRequestClose:function(){return j("close")}},p("div",{className:"mapp-style-list-wrapper"},N({onSelect:function(e){return j("pick-select",e)},selected:e.selected,styles:k.standardStyles,title:__("Standard styles")}),n),p("div",{className:"mapp-style-toolbar"},p("div",null,p(h,{isPrimary:!0,onClick:function(){return j("pick-add")}},__("New style")),p(h,{onClick:function(){return j("pick-cancel")}},__("Cancel")))))),"snazzy"==k.mode&&k.isOpen&&(k.snazzySelected,p(y,{title:__("Download style"),className:"mapp-style-modal mapp-style-modal-snazzy",onRequestClose:function(){return j("snazzy-cancel")},shouldCloseOnClickOutside:!0},p("form",{className:"mapp-style-snazzy-form",onSubmit:function(e){j("snazzy-search"),e.preventDefault()}},p(a.Input,{className:"mapp-style-snazzy-search",value:k.search,placeholder:__("Search"),onChange:function(e){return S({snazzySearch:e})}}),k.isSearching&&p(v,null),!k.isSearching&&p(h,{isPrimary:!0,icon:"search",onClick:function(){return j("snazzy-search")}})),N({selected:k.snazzySelected,styles:k.snazzyStyles,onSelect:function(e){return j("snazzy-save",e)}}),p("div",{className:"mapp-style-toolbar"},p("div",null,p(h,{onClick:function(){return j("snazzy-cancel")}},__("Cancel"))),(t=k.snazzyPagination)&&k.snazzyStyles&&k.snazzyStyles.length?p(r.S,{count:t.totalItems,onChange:function(e){return x(e)},page:t.currentPage,pageSize:t.pageSize}):null))))}},214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappCard:()=>v});n(824);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],_n=!0,a=!1,_e=void 0;try{for(var r,o=e[Symbol.iterator]();!(_n=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,_e=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw _e}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=wp.element.createElement,p=wp.element,u=p.Fragment,d=p.useEffect,m=(p.useLayoutEffect,p.useCallback,p.useRef),f=p.useState,_=(wp.data.useSelect,wp.components),h=_.Button,g=_.Dashicon,b=_.ExternalLink,y=_.Guide,__=(_.Modal,function(e){return wp.i18n.__(e,"mappress-google-maps-for-wordpress")});function v(e){var t=e.icon,n=e.title,a=s(e,["icon","title"]);return c("div",{className:"mapp-support-card"},n&&c("div",{className:"mapp-support-card-title"},c("h3",null,t&&c(g,{icon:t}),n)),c("div",{className:"mapp-support-card-content"},a.children))}document.getElementById("mapp-support-page")&&wp.element.render(c((function(e){var t=i(f({engine:e.engine?e.engine:"leaflet",isOpen:e.isOpen,apiKey:e.apiKey,mapbox:e.mapbox}),2),n=t[0],a=t[1];function o(e){a((function(t){return r(r({},t),e)}))}function l(e){return c("div",{className:"mapp-guide-engine"+(e.selected?" mapp-selected":""),onClick:function(){return e.onClick()}},c("h2",{className:"mapp-guide-engine-title"},e.title),c("div",{className:"mapp-guide-engine-content"},e.content))}return m(null),d((function(){}),[]),c("div",{className:"mapp-support"},c(u,null,c("div",{className:"mapp-support-section"},c("div",{className:"mapp-support-header"},c("img",{src:mappl10n.options.baseurl+"/images/icon-128x128.png"}),c("h1",null,__("MapPress Support")),c("i",null,__("Build amazing maps with the easiest and most powerful mapping plugin available")),c("div",null,c(h,{className:"mapp-support-guide-toggle",isPrimary:!0,onClick:function(){return o({isOpen:!0})}},__("Open Setup Wizard"))))),c("div",{className:"mapp-support-section"},c("div",{className:"mapp-support-cards"},c(v,{icon:"book",title:__("Documentation")},c("p",null,__("Detailed plugin documentation:")),c(b,{href:"https://mappresspro.com/mappress-documentation/"},__("Documentation")),c(b,{href:"https://mappresspro.com/whats-new/"},__("What's new")),c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-map-library-and-map-editors"},__("Creating your first map"))),c(v,{icon:"warning",title:__("Troubleshooting")},c("p",null,c("b",null,__("Check for a plugin or theme conflict:"))),c("ol",null,c("li",null,__("Deactivate ALL other plugins")),c("li",null,__("Switch to a standard WordPress theme")),c("li",null,__("If the maps are working, reactivate one by one to find the conflict."))),c("p",null,__("For more info:")),c(b,{href:"https://mappresspro.com/mappress-faq/"},__("MapPress FAQ"))),c(v,{icon:"megaphone",title:__("Support")},c("p",null,__("Need some help?")),c(b,{href:"https://mappresspro.com/forums/forum/mappress-support/"},__("Support forum")),c(b,{href:"https://mappresspro.com/chris-contact/"},__("Contact")))))),function(){if(n.isOpen)return c(y,{className:"mapp-guide",onFinish:function(){return function(e,t){switch(e){case"save":var a;o({isOpen:!1}),a="google"==n.engine?"google":n.mapbox?"mapbox":"nominatim",mapp.lib.ajax({type:"POST",data:{action:"mapp_option_save",nonce:mappl10n.options.nonce,settings:{engine:n.engine,apiKey:n.apiKey,mapbox:n.mapbox,geocoder:a}},callback:function(e){"OK"!=e.status&&alert("Unable to save settings.  Please check the support troubleshooting guide.")}})}}("save")},pages:[{content:c("div",{className:"mapp-guide-page mapp-guide-engines"},c("h1",null,__("Please Choose a Mapping API")),c("p",null,__("MapPress supports both Leaflet and Google mapping APIs."),c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-picking-a-mapping-api"},__("Learn more"))),c("div",{className:"mapp-guide-engines"},l({onClick:function(){return o({engine:"leaflet"})},selected:"leaflet"==n.engine,title:"Leaflet",content:c("ul",null,c("li",null,__("No API key")),c("li",null,__("Free unlimited usage")),c("li",null,__("Good functionality")),c("li",null,__("Best for high traffic sites")))}),l({onClick:function(){return o({engine:"google"})},selected:"google"==n.engine,title:"Google",content:c("ul",null,c("li",null,__("API key required")),c("li",null,__("Limited free usage")),c("li",null,__("Excellent functionality")),c("li",null,__("Best for low traffic sites")))}))),image:c("div",{className:"mapp-guide-header mapp-guide-image-small"},c("img",{src:mappl10n.options.baseurl+"/images/icon-128x128.png"}),c("h1",null,__("Welcome to MapPress!")))},{content:"google"==n.engine?c("div",{className:"mapp-guide-page mapp-guide-apikey"},c("h1",null,__("Google API Key")),c("p",null,__("Google requires an API key to use Google Maps.  Please enter your key below.")),c(h,{isPrimary:!0,href:"https://mappresspro.com/how-to-get-a-google-maps-api-key/",target:"_blank"},__("Get an API Key")),c("input",{className:"mapp-guide-apikey",onChange:function(e){return o({apiKey:e.target.value})},placeholder:__("Enter your API key here"),value:n.apiKey})):c("div",{className:"mapp-guide-page mapp-guide-apikey"},c("h1",null,__("Sign up with Mapbox")),c("p",null,__("Mapbox makes Leaflet better with great-looking map tiles, styled maps, and a powerful geocoder.")," "+__("A generous free tier means it's free for most sites."),c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-using-mapbox-with-leaflet"},__("Learn more"))),c(h,{isPrimary:!0,href:"https://account.mapbox.com/auth/signup/",target:"_blank"},__("Get Mapbox Access Token")),c("input",{className:"mapp-guide-apikey",onChange:function(e){return o({mapbox:e.target.value})},placeholder:__("Enter your access token here"),value:n.mapbox})),image:c("div",{className:"mapp-guide-header mapp-guide-image-small"},"google"==n.engine&&c("img",{src:mappl10n.options.baseurl+"/images/google_logo.png"}),"leaflet"==n.engine&&c("img",{src:mappl10n.options.baseurl+"/images/mapbox_logo_white.png"}))},{content:c("div",{className:"mapp-guide-page mapp-guide-gutenberg"},c("h1",null,__("Maps in the Block Editor")),c("p",null,__("MapPress provides custom block types for the Gutenberg editor.")),c("p",null,__("Just insert a MapPress Map block to get started."),c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-create-a-map-with-the-gutenberg-block-editor"},__("Learn more")))),image:c("div",{className:"mapp-guide-header"},c("img",{src:mappl10n.options.baseurl+"/images/gutenberg_map_block.gif"}))},{content:c("div",{className:"mapp-guide-page mapp-guide-classic"},c("h1",null,__("Maps in the Classic Editor")),c("p",null,__('MapPress also supports the "classic" editor.  Just click the MapPress button to open the map library.')),c("p",null,c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-create-a-map-with-the-classic-editor"},__("Learn more")))),image:c("div",{className:"mapp-guide-header"},c("img",{src:mappl10n.options.baseurl+"/images/classic_map.gif"}))},{content:c("div",{className:"mapp-guide-page mapp-guide-library"},c("h1",null,__("Map Library")),c("p",null,__("The Map Library provides an easy way to see and edit all of your maps.  The library can be opened in the post editor or from the MapPress menu.")),c("p",null,c(b,{href:"https://mappresspro.com/mappress-documentation/#toc-map-library-and-map-editors"},__("Learn more")))),image:c("div",{className:"mapp-guide-header"},c("img",{src:mappl10n.options.baseurl+"/images/library_menu.gif"}))},{content:c("div",{className:"mapp-guide-page mapp-guide-end"},c("h1",null,__("Happy Mapping")),c("p",null,__("Enjoy the plugin!  Replay this guide any time from the MapPress support menu."))),image:c("div",{className:"mapp-guide-header"},c("img",{src:mappl10n.options.baseurl+"/images/icon-128x128"}))}]})}())}),mappress_support_state),document.getElementById("mapp-support-page"))},308:(e,t,n)=>{"use strict";e.exports=function(e,t){var a,r,o,i,l,s,c,p,u,d,m,f,_,h=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),g=h.length,b=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},y="undefined"!=typeof window?window:n.g;y.$locutus=y.$locutus||{};var v=y.$locutus;for(v.php=v.php||{},t||(t=y),a=0;a<g&&(u=b((p=h[a].split("="))[0]),d=p.length<2?"":b(p[1]),!(u.includes("__proto__")||u.includes("constructor")||u.includes("prototype")));a++){for(;" "===u.charAt(0);)u=u.slice(1);if(u.indexOf("\0")>-1&&(u=u.slice(0,u.indexOf("\0"))),u&&"["!==u.charAt(0)){for(f=[],m=0,r=0;r<u.length;r++)if("["!==u.charAt(r)||m){if("]"===u.charAt(r)&&m&&(f.length||f.push(u.slice(0,m-1)),f.push(u.substr(m,r-m)),m=0,"["!==u.charAt(r+1)))break}else m=r+1;for(f.length||(f=[u]),r=0;r<f[0].length&&(" "!==(c=f[0].charAt(r))&&"."!==c&&"["!==c||(f[0]=f[0].substr(0,r)+"_"+f[0].substr(r+1)),"["!==c);r++);for(s=t,r=0,_=f.length;r<_;r++){if(l=s,(""===(u=f[r].replace(/^['"]/,"").replace(/['"]$/,""))||" "===u)&&0!==r){for(i in o=-1,s)s.hasOwnProperty(i)&&+i>o&&i.match(/^\d+$/g)&&(o=+i);u=o+1}Object(s[u])!==s[u]&&(s[u]={}),s=s[u]}l[u]=d}}}}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(787),n(844),n(215),n(713),n(525),n(371),n(999),n(143),n(816),n(378),n(498),n(670),n(218),n(824),n(694),n(429),n(214)})();